"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[58,889],{77346:function(e,a,t){t.d(a,{Z:function(){return d},l:function(){return o}});var l=t(12933);async function d(e,a="提示",t="warning"){try{const d=await l.s.confirm(e,a,{confirmButtonText:"确定",cancelButtonText:"取消",type:t});return"confirm"===d}catch(d){return!1}}function o(e){navigator.clipboard.writeText(e).then((()=>{this.$message.success("复制成功！内容："+e)})).catch((()=>{const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),this.$message.success("复制成功！内容："+e)}))}},74889:function(e,a,t){t.r(a),t.d(a,{default:function(){return i}});var l=t(56768);const d={class:"container"};function o(e,a){return(0,l.uX)(),(0,l.CE)("div",d,a[0]||(a[0]=[(0,l.Lk)("iframe",{src:"/IpData.html"},null,-1)]))}var s=t(71241);const n={},r=(0,s.A)(n,[["render",o],["__scopeId","data-v-494b2756"]]);var i=r},82058:function(e,a,t){t.r(a),t.d(a,{default:function(){return te}});var l=t(56768);const d={class:"tab-content"},o={key:0},s={key:1},n={key:2},r={key:3},i={key:4};function c(e,a,t,c,p,u){const g=(0,l.g2)("Setting"),f=(0,l.g2)("el-icon"),m=(0,l.g2)("el-tab-pane"),h=(0,l.g2)("DocumentCopy"),C=(0,l.g2)("MostlyCloudy"),b=(0,l.g2)("Search"),k=(0,l.g2)("MapLocation"),y=(0,l.g2)("BasicCfg"),F=(0,l.g2)("BackUp"),P=(0,l.g2)("CloudflareCfg"),D=(0,l.g2)("IpDataView"),_=(0,l.g2)("MapData"),v=(0,l.g2)("el-tabs");return(0,l.uX)(),(0,l.Wv)(v,{type:"border-card",class:"demo-tabs",modelValue:p.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>p.activeTab=e)},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"basicCfg",name:"basicCfg"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1}),a[1]||(a[1]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"基本设置",-1))])])),_:1}),(0,l.bF)(m,{label:"backup",name:"backup"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.bF)(h)])),_:1}),a[2]||(a[2]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"备份恢复",-1))])])),_:1}),(0,l.bF)(m,{label:"cfCfg",name:"cfCfg"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.bF)(C)])),_:1}),a[3]||(a[3]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"Cloudflare配置",-1))])])),_:1}),(0,l.bF)(m,{label:"ipData",name:"ipData"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.bF)(b)])),_:1}),a[4]||(a[4]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"IP信息查询",-1))])])),_:1}),(0,l.bF)(m,{label:"mapData",name:"mapData"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.bF)(k)])),_:1}),a[5]||(a[5]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"地图数据",-1))])])),_:1}),(0,l.Lk)("div",d,["basicCfg"===p.activeTab?((0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(y)])):(0,l.Q3)("",!0),"backup"===p.activeTab?((0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(F)])):(0,l.Q3)("",!0),"cfCfg"===p.activeTab?((0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(P)])):(0,l.Q3)("",!0),"ipData"===p.activeTab?((0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(D)])):(0,l.Q3)("",!0),"mapData"===p.activeTab?((0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(_)])):(0,l.Q3)("",!0)])])),_:1},8,["modelValue"])}const p={key:0,class:"mfa-tip"},u={key:1,class:"mfa-preview"},g={class:"button-group"},f={class:"button-group"},m={class:"button-group"};function h(e,a,t,d,o,s){const n=(0,l.g2)("el-divider"),r=(0,l.g2)("el-input"),i=(0,l.g2)("el-form-item"),c=(0,l.g2)("el-switch"),h=(0,l.g2)("el-image"),C=(0,l.g2)("el-button"),b=(0,l.g2)("el-card"),k=(0,l.g2)("el-aside"),y=(0,l.g2)("el-main"),F=(0,l.g2)("el-container");return(0,l.uX)(),(0,l.Wv)(F,{style:{height:"100vh"}},{default:(0,l.k6)((()=>[(0,l.bF)(k,{width:"50%",class:"left-panel"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{shadow:"hover",class:"settings-card"},{default:(0,l.k6)((()=>[a[12]||(a[12]=(0,l.Lk)("h3",null,"基本设置",-1)),(0,l.bF)(n),a[13]||(a[13]=(0,l.Lk)("h4",null,"Telegram 配置",-1)),(0,l.bF)(i,{label:"机器人 Token"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{modelValue:o.UpdateSysCfgParams.tgBotToken,"onUpdate:modelValue":a[0]||(a[0]=e=>o.UpdateSysCfgParams.tgBotToken=e),placeholder:"请输入 Telegram Bot Token",clearable:"",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),(0,l.bF)(i,{label:"个人 ID"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{modelValue:o.UpdateSysCfgParams.tgChatId,"onUpdate:modelValue":a[1]||(a[1]=e=>o.UpdateSysCfgParams.tgChatId=e),placeholder:"请输入 Telegram 个人 ID",clearable:"",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),(0,l.bF)(n),a[14]||(a[14]=(0,l.Lk)("h4",null,"钉钉配置",-1)),(0,l.bF)(i,{label:"Access Token"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{modelValue:o.UpdateSysCfgParams.dingToken,"onUpdate:modelValue":a[2]||(a[2]=e=>o.UpdateSysCfgParams.dingToken=e),placeholder:"请输入钉钉 Access Token",clearable:"",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),(0,l.bF)(i,{label:"Secret"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{modelValue:o.UpdateSysCfgParams.dingSecret,"onUpdate:modelValue":a[3]||(a[3]=e=>o.UpdateSysCfgParams.dingSecret=e),placeholder:"请输入钉钉 Secret",clearable:"",type:"password","show-password":""},null,8,["modelValue"])])),_:1}),(0,l.bF)(n),a[15]||(a[15]=(0,l.Lk)("h4",null,"版本更新通知配置",-1)),(0,l.bF)(i,{label:"是否启用版本更新通知"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:o.UpdateSysCfgParams.enableVersionInform,"onUpdate:modelValue":a[4]||(a[4]=e=>o.UpdateSysCfgParams.enableVersionInform=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])])),_:1}),(0,l.bF)(n),a[16]||(a[16]=(0,l.Lk)("h4",null,"每日播报配置",-1)),(0,l.bF)(i,{label:"是否启用每日播报"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:o.UpdateSysCfgParams.enableDailyBroadcast,"onUpdate:modelValue":a[5]||(a[5]=e=>o.UpdateSysCfgParams.enableDailyBroadcast=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])])),_:1}),(0,l.bF)(i,{label:"定时任务cron表达式"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{modelValue:o.UpdateSysCfgParams.dailyBroadcastCron,"onUpdate:modelValue":a[6]||(a[6]=e=>o.UpdateSysCfgParams.dailyBroadcastCron=e),placeholder:"例（每天早晨9点30分0秒）：0 30 9 * * ?",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(n),a[17]||(a[17]=(0,l.Lk)("h4",null,"MFA 配置",-1)),(0,l.bF)(i,{label:"启用 MFA"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:o.UpdateSysCfgParams.enableMfa,"onUpdate:modelValue":a[7]||(a[7]=e=>o.UpdateSysCfgParams.enableMfa=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])])),_:1}),o.UpdateSysCfgParams.enableMfa?((0,l.uX)(),(0,l.CE)("p",p," ⭐ 如果禁用后重新启用，请在 APP 上删除旧验证码并重新扫码绑定新验证码。 ")):(0,l.Q3)("",!0),o.UpdateSysCfgParams.enableMfa?((0,l.uX)(),(0,l.CE)("div",u,[(0,l.bF)(h,{src:o.UpdateSysCfgParams.mfaQrData,fit:"contain",style:{width:"200px",height:"200px"}},null,8,["src"]),(0,l.bF)(r,{modelValue:o.UpdateSysCfgParams.mfaSecret,"onUpdate:modelValue":a[8]||(a[8]=e=>o.UpdateSysCfgParams.mfaSecret=e),style:{"margin-top":"10px"},disabled:""},null,8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.Lk)("div",g,[(0,l.bF)(C,{type:"primary",onClick:s.updateSysCfg,loading:o.cfgLoading},{default:(0,l.k6)((()=>a[11]||(a[11]=[(0,l.eW)("更新配置")]))),_:1},8,["onClick","loading"])])])),_:1})])),_:1}),(0,l.bF)(y,{class:"right-panel"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{shadow:"hover",class:"test-card"},{default:(0,l.k6)((()=>[a[20]||(a[20]=(0,l.Lk)("h3",null,"测试消息发送",-1)),(0,l.bF)(r,{type:"textarea",modelValue:o.message,"onUpdate:modelValue":a[9]||(a[9]=e=>o.message=e),placeholder:"请输入测试文本...",rows:10,resize:"none"},null,8,["modelValue"]),(0,l.Lk)("div",f,[(0,l.bF)(C,{type:"primary",onClick:s.sendMsg,loading:o.sendLoading},{default:(0,l.k6)((()=>a[18]||(a[18]=[(0,l.eW)("发送测试消息")]))),_:1},8,["onClick","loading"])]),(0,l.bF)(n),a[21]||(a[21]=(0,l.Lk)("h3",null,"测试MFA验证码",-1)),(0,l.bF)(r,{modelValue:o.mfaCode,"onUpdate:modelValue":a[10]||(a[10]=e=>o.mfaCode=e),clearable:"",placeholder:"请输入MFA验证码"},null,8,["modelValue"]),(0,l.Lk)("div",m,[(0,l.bF)(C,{type:"primary",onClick:s.checkMfaCode,loading:o.sendMfaCodeLoading},{default:(0,l.k6)((()=>a[19]||(a[19]=[(0,l.eW)("验证")]))),_:1},8,["onClick","loading"])])])),_:1})])),_:1})])),_:1})}var C=t(51219),b={data(){return{cfgLoading:!1,sendLoading:!1,sendMfaCodeLoading:!1,UpdateSysCfgParams:{dingToken:"",dingSecret:"",tgChatId:"",tgBotToken:"",enableMfa:!1,mfaSecret:"",mfaQrData:"",enableDailyBroadcast:!0,dailyBroadcastCron:"",enableVersionInform:!0},message:"",mfaCode:""}},mounted(){this.getSysCfg()},methods:{async getSysCfg(){await this.$axios.post("/sys/getSysCfg",{}).then((e=>{e.data.success?((0,C.nk)({message:e.data.msg,type:"success",duration:2e3}),this.UpdateSysCfgParams=e.data.data):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async updateSysCfg(){this.cfgLoading=!0,await this.$axios.post("/sys/updateSysCfg",{...this.UpdateSysCfgParams}).then((e=>{e.data.success?((0,C.nk)({message:e.data.msg,type:"success",duration:2e3}),this.getSysCfg()):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})),this.cfgLoading=!1},async sendMsg(){this.sendLoading=!0,await this.$axios.post("/sys/sendMsg",{message:this.message}).then((e=>{e.data.success?(0,C.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})),this.sendLoading=!1},async checkMfaCode(){this.sendMfaCodeLoading=!0,await this.$axios.post("/sys/checkMfaCode",{mfaCode:this.mfaCode}).then((e=>{e.data.success?(0,C.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})),this.sendMfaCodeLoading=!1}}},k=t(71241);const y=(0,k.A)(b,[["render",h],["__scopeId","data-v-d1f4db9a"]]);var F=y,P=t(45130);function D(e,a,t,d,o,s){const n=(0,l.g2)("el-switch"),r=(0,l.g2)("el-form-item"),i=(0,l.g2)("el-input"),c=(0,l.g2)("el-button"),p=(0,l.g2)("el-divider"),u=(0,l.g2)("el-text"),g=(0,l.g2)("upload-filled"),f=(0,l.g2)("el-icon"),m=(0,l.g2)("el-upload"),h=(0,l.g2)("el-form");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(h,null,{default:(0,l.k6)((()=>[(0,l.bF)(r,{label:"是否启用加密"},{default:(0,l.k6)((()=>[(0,l.bF)(n,{modelValue:o.BackupParams.enableEnc,"onUpdate:modelValue":a[0]||(a[0]=e=>o.BackupParams.enableEnc=e)},null,8,["modelValue"])])),_:1}),(0,l.bo)((0,l.bF)(r,{label:"密钥"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:o.BackupParams.password,"onUpdate:modelValue":a[1]||(a[1]=e=>o.BackupParams.password=e),placeholder:"输入密钥",type:"password","show-password":"",clearable:"",style:{width:"400px"}},null,8,["modelValue"])])),_:1},512),[[P.aG,o.BackupParams.enableEnc]]),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"primary",onClick:s.handleBackup,style:{width:"430px"}},{default:(0,l.k6)((()=>a[3]||(a[3]=[(0,l.eW)("备份并下载")]))),_:1},8,["onClick"])])),_:1}),(0,l.bF)(p,{class:"divider"}),(0,l.bF)(u,{class:"mx-1"},{default:(0,l.k6)((()=>a[4]||(a[4]=[(0,l.eW)("上传备份文件")]))),_:1}),(0,l.bF)(r,{label:"",style:{"margin-top":"10px"}},{default:(0,l.k6)((()=>[(0,l.bF)(m,{class:"upload-demo",drag:"","http-request":s.handleFileUpload,multiple:"","show-file-list":!0,"file-list":o.RecoverParams.fileList,style:{width:"400px"}},{tip:(0,l.k6)((()=>a[5]||(a[5]=[(0,l.Lk)("div",{class:"el-upload__tip"}," ⭐请上传备份压缩包文件 ",-1)]))),default:(0,l.k6)((()=>[(0,l.bF)(f,{class:"el-icon--upload"},{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1}),a[6]||(a[6]=(0,l.Lk)("div",{class:"el-upload__text"},[(0,l.eW)(" Drop file here or "),(0,l.Lk)("em",null,"click to upload")],-1))])),_:1},8,["http-request","file-list"])])),_:1}),(0,l.bF)(r,{label:"密钥"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:o.RecoverParams.encryptionKey,"onUpdate:modelValue":a[2]||(a[2]=e=>o.RecoverParams.encryptionKey=e),placeholder:"输入密钥（可选）",clearable:"",style:{width:"400px"},type:"password","show-password":""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"primary",onClick:s.handleRecover,style:{width:"430px"},loading:o.RecoverLoading},{default:(0,l.k6)((()=>a[7]||(a[7]=[(0,l.eW)("恢复数据 ")]))),_:1},8,["onClick","loading"])])),_:1})])),_:1})])}t(44114),t(98992),t(3949),t(14603),t(47566),t(98721);var _=t(57477),v={components:{UploadFilled:_.UploadFilled},data(){return{BackupParams:{enableEnc:!1,password:""},RecoverParams:{encryptionKey:"",fileList:[]},RecoverLoading:!1}},methods:{async handleBackup(){if(!this.BackupParams.enableEnc||this.BackupParams.password?.trim())try{const e=await this.$axios.post("/sys/backup",{...this.BackupParams},{responseType:"blob"});let a="backup.zip";const t=e.headers["content-disposition"];if(t){const e=/filename\*?=(?:.*'')?(.+)/,l=e.exec(t);l&&l[1]&&(a=decodeURIComponent(l[1]))}const l=new Blob([e.data],{type:"application/octet-stream"}),d=window.URL.createObjectURL(l),o=document.createElement("a");o.href=d,o.download=a,o.click(),window.URL.revokeObjectURL(d),(0,C.nk)({message:"备份文件已成功下载",type:"success",duration:2e3})}catch(e){console.error("Error during backup:",e),(0,C.nk)({message:"备份失败，请重试",type:"error",duration:2e3})}else(0,C.nk)({message:"密钥不能为空",type:"error",duration:2e3})},handleFileUpload({file:e}){const a=new FileReader;a.onload=a=>{const t=a.target.result;t&&this.RecoverParams.fileList.push(e)},a.readAsArrayBuffer(e)},async handleRecover(){this.RecoverLoading=!0;const e=new FormData;e.append("encryptionKey",this.RecoverParams.encryptionKey),this.RecoverParams.fileList.forEach((a=>{e.append("fileList",a)})),await this.$axios.post("/sys/recover",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{e.data.success?(this.resetForm(),(0,C.nk)({message:e.data.msg,type:"success",duration:2e3})):(this.RecoverLoading=!1,(0,C.nk)({message:e.data.msg,type:"error",duration:2e3}))})).catch((e=>{console.error("Error:",e)})),this.resetForm()},resetForm(){this.BackupParams={enableEnc:!1,password:""},this.RecoverParams={encryptionKey:"",fileList:[]},this.RecoverLoading=!1}}};const w=(0,k.A)(v,[["render",D],["__scopeId","data-v-37b29a3e"]]);var R=w,V=t(24232);const U={key:0},x={style:{"overflow-x":"auto"}},I={key:1},L={class:"dialog-footer"},S={class:"dialog-footer"};function A(e,a,t,d,o,s){const n=(0,l.g2)("el-button"),r=(0,l.g2)("el-input"),i=(0,l.g2)("el-table-column"),c=(0,l.g2)("el-tag"),p=(0,l.g2)("el-tooltip"),u=(0,l.g2)("el-table"),g=(0,l.g2)("el-pagination"),f=(0,l.g2)("CloudflareDnsRecords"),m=(0,l.g2)("el-form-item"),h=(0,l.g2)("el-form"),C=(0,l.g2)("el-dialog"),b=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[o.showCfDnsRecords?((0,l.uX)(),(0,l.CE)("div",I,[(0,l.bF)(n,{onClick:a[4]||(a[4]=e=>o.showCfDnsRecords=!1)},{default:(0,l.k6)((()=>a[25]||(a[25]=[(0,l.eW)("返回 Cloudflare 配置列表")]))),_:1}),(0,l.bF)(f,{cfCfgId:o.cfCfgId,cfCfgName:o.cfCfgName},null,8,["cfCfgId","cfCfgName"])])):((0,l.uX)(),(0,l.CE)("div",U,[(0,l.bF)(n,{type:"success",style:{"margin-bottom":"20px"},onClick:s.getCfCfgList},{default:(0,l.k6)((()=>a[19]||(a[19]=[(0,l.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,l.bF)(r,{modelValue:o.pageParams.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>o.pageParams.keyword=e),placeholder:"模糊搜索",onInput:s.getCfCfgList,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"400px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,l.bF)(n,{type:"primary",onClick:a[1]||(a[1]=e=>o.addCfCfgDialog=!0),style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[20]||(a[20]=[(0,l.eW)(" 新增配置 ")]))),_:1}),(0,l.bF)(n,{type:"danger",onClick:s.batchRemove,disabled:!o.batchSelected.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[21]||(a[21]=[(0,l.eW)(" 批量删除 ")]))),_:1},8,["onClick","disabled"]),(0,l.Lk)("div",x,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(u,{data:o.cfCfgPageRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:s.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(i,{type:"selection",width:"35"}),(0,l.bF)(i,{label:"域名",width:"300"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.domain,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"success"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.domain),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"ZoneId",width:"350"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.zoneId,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.zoneId),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"Token",width:"400"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.apiToken,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.apiToken),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"创建时间"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.createTime,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.createTime),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"操作",width:"220"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(n,{onClick:a=>s.handleUpdateCfCfg(e),type:"primary",link:""},{default:(0,l.k6)((()=>a[22]||(a[22]=[(0,l.eW)(" 编辑 ")]))),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:a=>s.handleCfDnsRecords(e),type:"success",link:""},{default:(0,l.k6)((()=>a[23]||(a[23]=[(0,l.eW)(" DNS记录 ")]))),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:a=>s.handleRemove(e),type:"danger",link:""},{default:(0,l.k6)((()=>a[24]||(a[24]=[(0,l.eW)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[b,o.loading]])]),(0,l.bF)(g,{onCurrentChange:s.handlePageChange,onSizeChange:s.handleSizeChange,"current-page":o.pageParams.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>o.pageParams.currentPage=e),"page-size":o.pageParams.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>o.pageParams.pageSize=e),"page-sizes":[5,10,20,50],total:o.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])]))]),(0,l.bF)(C,{modelValue:o.addCfCfgDialog,"onUpdate:modelValue":a[10]||(a[10]=e=>o.addCfCfgDialog=e),title:"新增 Cloudflare 配置名称",width:"40%",onClose:a[11]||(a[11]=e=>o.addCfCfgDialog=!1)},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",L,[(0,l.bF)(n,{type:"info",onClick:a[8]||(a[8]=e=>o.addCfCfgDialog=!1)},{default:(0,l.k6)((()=>a[26]||(a[26]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(n,{type:"primary",onClick:a[9]||(a[9]=e=>s.addCfCfg()),loading:o.addCfCfgLoading},{default:(0,l.k6)((()=>a[27]||(a[27]=[(0,l.eW)("新增")]))),_:1},8,["loading"])])])),default:(0,l.k6)((()=>[(0,l.bF)(h,{"label-width":"100px"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"域名","label-width":"130"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"cf-input",modelValue:o.AddCfCfgParams.domain,"onUpdate:modelValue":a[5]||(a[5]=e=>o.AddCfCfgParams.domain=e),placeholder:"请输入托管于 Cloudflare 的域名，例：abc.xyz",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(m,{label:"区域ID (ZoneId)","label-width":"130"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"cf-input",modelValue:o.AddCfCfgParams.zoneId,"onUpdate:modelValue":a[6]||(a[6]=e=>o.AddCfCfgParams.zoneId=e),placeholder:"请输入托管于 Cloudflare 的域名的区域ID",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(m,{label:"API令牌 (Token)","label-width":"130"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"cf-input",modelValue:o.AddCfCfgParams.apiToken,"onUpdate:modelValue":a[7]||(a[7]=e=>o.AddCfCfgParams.apiToken=e),placeholder:"请输入托管于 Cloudflare 的域名的 API令牌（需要自行生成）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(C,{modelValue:o.updateCfCfgDialog,"onUpdate:modelValue":a[17]||(a[17]=e=>o.updateCfCfgDialog=e),title:"修改 Cloudflare 配置名称",width:"40%",onClose:a[18]||(a[18]=e=>o.updateCfCfgDialog=!1)},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",S,[(0,l.bF)(n,{type:"info",onClick:a[15]||(a[15]=e=>o.updateCfCfgDialog=!1)},{default:(0,l.k6)((()=>a[28]||(a[28]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(n,{type:"primary",onClick:a[16]||(a[16]=e=>s.updateCfCfg()),loading:o.updateCfCfgLoading},{default:(0,l.k6)((()=>a[29]||(a[29]=[(0,l.eW)("修改")]))),_:1},8,["loading"])])])),default:(0,l.k6)((()=>[(0,l.bF)(h,{"label-width":"100px"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"域名","label-width":"130"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"cf-input",modelValue:o.UpdateCfCfgParams.domain,"onUpdate:modelValue":a[12]||(a[12]=e=>o.UpdateCfCfgParams.domain=e),placeholder:"请输入托管于 Cloudflare 的域名，例：abc.xyz",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(m,{label:"区域ID (ZoneId)","label-width":"130"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"cf-input",modelValue:o.UpdateCfCfgParams.zoneId,"onUpdate:modelValue":a[13]||(a[13]=e=>o.UpdateCfCfgParams.zoneId=e),placeholder:"请输入托管于 Cloudflare 的域名的区域ID",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(m,{label:"API令牌 (Token)","label-width":"130"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"cf-input",modelValue:o.UpdateCfCfgParams.apiToken,"onUpdate:modelValue":a[14]||(a[14]=e=>o.UpdateCfCfgParams.apiToken=e),placeholder:"请输入托管于 Cloudflare 的域名的 API令牌（需要自行生成）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}t(81454);const W={style:{"font-size":"16px","font-weight":"bold","margin-left":"20px"}},O={style:{"overflow-x":"auto"}},T={class:"dialog-footer"},z={class:"dialog-footer"};function E(e,a,t,d,o,s){const n=(0,l.g2)("el-divider"),r=(0,l.g2)("el-button"),i=(0,l.g2)("el-input"),c=(0,l.g2)("el-table-column"),p=(0,l.g2)("el-tag"),u=(0,l.g2)("el-tooltip"),g=(0,l.g2)("el-table"),f=(0,l.g2)("el-pagination"),m=(0,l.g2)("el-option"),h=(0,l.g2)("el-select"),C=(0,l.g2)("el-form-item"),b=(0,l.g2)("el-switch"),k=(0,l.g2)("el-input-number"),y=(0,l.g2)("el-form"),F=(0,l.g2)("el-dialog"),P=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("span",W,"当前配置："+(0,V.v_)(this.cfCfgName),1),(0,l.bF)(n,{class:"divider"}),(0,l.bF)(r,{type:"success",style:{"margin-bottom":"20px"},onClick:s.reloadCfDnsRecords},{default:(0,l.k6)((()=>a[24]||(a[24]=[(0,l.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,l.bF)(i,{modelValue:o.pageParams.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>o.pageParams.keyword=e),placeholder:"模糊搜索",onInput:s.getCfDnsRecords,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"400px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,l.bF)(r,{type:"primary",onClick:a[1]||(a[1]=e=>o.addDnsRecordDialog=!0),style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[25]||(a[25]=[(0,l.eW)(" 新增 DNS 记录 ")]))),_:1}),(0,l.bF)(r,{type:"danger",onClick:s.batchRemove,disabled:!o.batchSelected.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[26]||(a[26]=[(0,l.eW)(" 批量删除 ")]))),_:1},8,["onClick","disabled"]),(0,l.Lk)("div",O,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(g,{data:o.cfDnsRecordsPageRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:s.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"selection",width:"35"}),(0,l.bF)(c,{label:"域名",width:"300"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(u,{content:e.name,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{type:"success"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.name),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(c,{label:"类型",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,V.v_)(e.type),1)])),_:1}),(0,l.bF)(c,{label:"内容",width:"300"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(u,{content:e.content,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.content),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(c,{label:"开启CDN",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(u,{content:!0===e.proxied?"是":"否",placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{type:!0===e.proxied?"success":"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(!0===e.proxied?"是":"否"),1)])),_:2},1032,["type"])])),_:2},1032,["content"])])),_:1}),(0,l.bF)(c,{label:"TTL（秒）",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,V.v_)(1===e.ttl?"自动":e.ttl),1)])),_:1}),(0,l.bF)(c,{label:"备注"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(u,{content:e.comment,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.comment),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(c,{label:"创建时间"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(u,{content:e.createdOn,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.createdOn),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(c,{label:"操作",width:"220"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(r,{onClick:a=>s.handleUpdateDns(e),type:"primary",link:""},{default:(0,l.k6)((()=>a[27]||(a[27]=[(0,l.eW)(" 编辑 ")]))),_:2},1032,["onClick"]),(0,l.bF)(r,{onClick:a=>s.handleRemove(e),type:"danger",link:""},{default:(0,l.k6)((()=>a[28]||(a[28]=[(0,l.eW)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[P,o.loading]]),(0,l.bF)(f,{onCurrentChange:s.handlePageChange,onSizeChange:s.handleSizeChange,"current-page":o.pageParams.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>o.pageParams.currentPage=e),"page-size":o.pageParams.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>o.pageParams.pageSize=e),"page-sizes":[5,10,20,50],total:o.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])]),(0,l.bF)(F,{modelValue:o.addDnsRecordDialog,"onUpdate:modelValue":a[12]||(a[12]=e=>o.addDnsRecordDialog=e),title:"新增 Cloudflare DNS 记录",width:"40%",onClose:a[13]||(a[13]=e=>o.addDnsRecordDialog=!1)},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",T,[(0,l.bF)(r,{type:"info",onClick:a[11]||(a[11]=e=>o.addDnsRecordDialog=!1)},{default:(0,l.k6)((()=>a[29]||(a[29]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(r,{type:"primary",onClick:s.addCfDnsRecords,loading:o.addDnsRecordLoading},{default:(0,l.k6)((()=>a[30]||(a[30]=[(0,l.eW)(" 新增 ")]))),_:1},8,["onClick","loading"])])])),default:(0,l.k6)((()=>[(0,l.bF)(y,{"label-width":"100px"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:"记录类型"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:o.OciAddCfDnsRecordsParams.type,"onUpdate:modelValue":a[4]||(a[4]=e=>o.OciAddCfDnsRecordsParams.type=e),placeholder:"请选择记录类型"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"A (IPv4)",value:"A"}),(0,l.bF)(m,{label:"AAAA (IPv6)",value:"AAAA"}),(0,l.bF)(m,{label:"CNAME (别名)",value:"CNAME"})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(C,{label:"域名前缀"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:o.OciAddCfDnsRecordsParams.prefix,"onUpdate:modelValue":a[5]||(a[5]=e=>o.OciAddCfDnsRecordsParams.prefix=e),placeholder:"请输入域名前缀，例如 oracle-kr",clearable:""},null,8,["modelValue"])])),_:1}),"A"===o.OciAddCfDnsRecordsParams.type||"AAAA"===o.OciAddCfDnsRecordsParams.type?((0,l.uX)(),(0,l.Wv)(C,{key:0,label:"IP 地址"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:o.OciAddCfDnsRecordsParams.ipAddress,"onUpdate:modelValue":a[6]||(a[6]=e=>o.OciAddCfDnsRecordsParams.ipAddress=e),placeholder:"请输入 IP 地址",clearable:""},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),"CNAME"===o.OciAddCfDnsRecordsParams.type?((0,l.uX)(),(0,l.Wv)(C,{key:1,label:"目标域名"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:o.OciAddCfDnsRecordsParams.ipAddress,"onUpdate:modelValue":a[7]||(a[7]=e=>o.OciAddCfDnsRecordsParams.ipAddress=e),placeholder:"请输入目标域名，例如 target.example.com",clearable:""},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(C,{label:"代理加速"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:o.OciAddCfDnsRecordsParams.proxied,"onUpdate:modelValue":a[8]||(a[8]=e=>o.OciAddCfDnsRecordsParams.proxied=e),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])])),_:1}),(0,l.bF)(C,{label:"TTL（秒）"},{default:(0,l.k6)((()=>[(0,l.bF)(k,{modelValue:o.OciAddCfDnsRecordsParams.ttl,"onUpdate:modelValue":a[9]||(a[9]=e=>o.OciAddCfDnsRecordsParams.ttl=e),min:60,step:60,placeholder:"TTL 秒数"},null,8,["modelValue"])])),_:1}),(0,l.bF)(C,{label:"备注"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{type:"textarea",modelValue:o.OciAddCfDnsRecordsParams.comment,"onUpdate:modelValue":a[10]||(a[10]=e=>o.OciAddCfDnsRecordsParams.comment=e),placeholder:"可填写备注",rows:"2",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(F,{modelValue:o.updateDnsRecordDialog,"onUpdate:modelValue":a[22]||(a[22]=e=>o.updateDnsRecordDialog=e),title:"更新 Cloudflare DNS 记录",width:"40%",onClose:a[23]||(a[23]=e=>o.updateDnsRecordDialog=!1)},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",z,[(0,l.bF)(r,{type:"info",onClick:a[21]||(a[21]=e=>o.updateDnsRecordDialog=!1)},{default:(0,l.k6)((()=>a[31]||(a[31]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(r,{type:"primary",onClick:s.updateCfDnsRecord,loading:o.updateDnsRecordLoading},{default:(0,l.k6)((()=>a[32]||(a[32]=[(0,l.eW)(" 更新 ")]))),_:1},8,["onClick","loading"])])])),default:(0,l.k6)((()=>[(0,l.bF)(y,{"label-width":"100px"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:"记录类型"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:o.OciUpdateCfDnsRecordsParams.type,"onUpdate:modelValue":a[14]||(a[14]=e=>o.OciUpdateCfDnsRecordsParams.type=e),placeholder:"请选择记录类型",disabled:""},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"A (IPv4)",value:"A"}),(0,l.bF)(m,{label:"AAAA (IPv6)",value:"AAAA"}),(0,l.bF)(m,{label:"CNAME (别名)",value:"CNAME"})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(C,{label:"域名前缀"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:o.OciUpdateCfDnsRecordsParams.prefix,"onUpdate:modelValue":a[15]||(a[15]=e=>o.OciUpdateCfDnsRecordsParams.prefix=e),placeholder:"请输入域名前缀",clearable:""},null,8,["modelValue"])])),_:1}),"A"===o.OciUpdateCfDnsRecordsParams.type||"AAAA"===o.OciUpdateCfDnsRecordsParams.type?((0,l.uX)(),(0,l.Wv)(C,{key:0,label:"IP 地址"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:o.OciUpdateCfDnsRecordsParams.ipAddress,"onUpdate:modelValue":a[16]||(a[16]=e=>o.OciUpdateCfDnsRecordsParams.ipAddress=e),placeholder:"请输入 IP 地址",clearable:""},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),"CNAME"===o.OciUpdateCfDnsRecordsParams.type?((0,l.uX)(),(0,l.Wv)(C,{key:1,label:"目标域名"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:o.OciUpdateCfDnsRecordsParams.ipAddress,"onUpdate:modelValue":a[17]||(a[17]=e=>o.OciUpdateCfDnsRecordsParams.ipAddress=e),placeholder:"请输入目标域名",clearable:""},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(C,{label:"代理加速"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:o.OciUpdateCfDnsRecordsParams.proxied,"onUpdate:modelValue":a[18]||(a[18]=e=>o.OciUpdateCfDnsRecordsParams.proxied=e),"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])])),_:1}),(0,l.bF)(C,{label:"TTL（秒）"},{default:(0,l.k6)((()=>[(0,l.bF)(k,{modelValue:o.OciUpdateCfDnsRecordsParams.ttl,"onUpdate:modelValue":a[19]||(a[19]=e=>o.OciUpdateCfDnsRecordsParams.ttl=e),min:60,step:60,placeholder:"TTL 秒数"},null,8,["modelValue"])])),_:1}),(0,l.bF)(C,{label:"备注"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{type:"textarea",modelValue:o.OciUpdateCfDnsRecordsParams.comment,"onUpdate:modelValue":a[20]||(a[20]=e=>o.OciUpdateCfDnsRecordsParams.comment=e),placeholder:"备注信息",rows:"2",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var M=t(77346),N={props:{cfCfgId:String,cfCfgName:String},mounted(){this.pageParams.cfCfgId=this.cfCfgId,this.getCfDnsRecords()},data(){return{loading:!0,addDnsRecordDialog:!1,addDnsRecordLoading:!1,updateDnsRecordDialog:!1,updateDnsRecordLoading:!1,pageParams:{cfCfgId:"",keyword:"",currentPage:1,pageSize:10,cleanReLaunch:!1},cfDnsRecordsPageRsp:[{id:"",name:"",type:"",content:"",proxiable:null,proxied:null,ttl:null,comment:"",createdOn:"",modifiedOn:"",tags:[]}],total:0,batchSelected:[],removeIds:[],OciAddCfDnsRecordsParams:{cfCfgId:"",prefix:"",type:"",ipAddress:"",proxied:!1,ttl:60,comment:""},OciUpdateCfDnsRecordsParams:{cfCfgId:"",id:"",prefix:"",type:"",ipAddress:"",proxied:!1,ttl:60,comment:""}}},methods:{async reloadCfDnsRecords(){this.pageParams.cleanReLaunch=!0,this.loading=!0,this.getCfDnsRecords(),this.pageParams.cleanReLaunch=!1},async getCfDnsRecords(){this.loading=!0,await this.$axios.post("/cf/listCfDnsRecord",{...this.pageParams}).then((e=>{e.data.success?(this.cfDnsRecordsPageRsp=e.data.data.records,this.total=e.data.data.total):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.cleanCache()}))},async batchRemove(){const e=await(0,M.Z)("确定要删除 DNS 记录吗？","删除 Cloudflare DNS 记录");e?(this.loading=!0,this.removeIds=this.batchSelected.map((e=>e.id)),await this.$axios.post("/cf/removeCfDnsRecord",{recordIds:this.removeIds,cfCfgId:this.cfCfgId}).then((e=>{e.data.success?(0,C.nk)({message:"删除 Cloudflare DNS 记录成功",type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3}),this.reloadCfDnsRecords()})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},async addCfDnsRecords(){const e=await(0,M.Z)("确定要新增 DNS 记录吗？","新增 Cloudflare DNS 记录");e?(this.OciAddCfDnsRecordsParams.cfCfgId=this.cfCfgId,this.addDnsRecordLoading=!0,await this.$axios.post("/cf/addCfDnsRecord",{...this.OciAddCfDnsRecordsParams}).then((e=>{e.data.success?(0,C.nk)({message:"新增 Cloudflare DNS 记录成功",type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3}),this.reloadCfDnsRecords()})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},async updateCfDnsRecord(){const e=await(0,M.Z)("确定要更新 DNS 记录吗？","更新 Cloudflare DNS 记录");e?(this.OciUpdateCfDnsRecordsParams.cfCfgId=this.cfCfgId,this.updateDnsRecordLoading=!0,await this.$axios.post("/cf/updateCfDnsRecord",{...this.OciUpdateCfDnsRecordsParams}).then((e=>{e.data.success?(0,C.nk)({message:"更新 Cloudflare DNS 记录成功",type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3}),this.reloadCfDnsRecords()})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},handleUpdateDns(e){this.OciUpdateCfDnsRecordsParams.id=e.id,this.OciUpdateCfDnsRecordsParams.type=e.type,this.OciUpdateCfDnsRecordsParams.ipAddress=e.content,this.OciUpdateCfDnsRecordsParams.proxied=e.proxied,this.OciUpdateCfDnsRecordsParams.ttl=e.ttl,this.OciUpdateCfDnsRecordsParams.comment=e.comment;const a=e.name;if(a.endsWith(this.cfCfgName)){const e="."+this.cfCfgName;this.OciUpdateCfDnsRecordsParams.prefix=a.slice(0,-e.length)}this.updateDnsRecordDialog=!0},cleanCache(){this.batchSelected=[],this.loading=!1,this.addDnsRecordLoading=!1,this.addDnsRecordDialog=!1,this.updateDnsRecordLoading=!1,this.updateDnsRecordDialog=!1,this.OciAddCfDnsRecordsParams={},this.OciUpdateCfDnsRecordsParams={}},handleRemove(e){this.batchSelected.push(e),this.batchRemove()},handlePageChange(e){this.pageParams.currentPage=e,this.getCfDnsRecords()},handleSizeChange(e){this.pageParams.currentPage=1,this.pageParams.pageSize=e,this.getCfDnsRecords()},handleSelectionChange(e){this.batchSelected=e}}};const B=(0,k.A)(N,[["render",E],["__scopeId","data-v-19096cfa"]]);var $=B,X={components:{CloudflareDnsRecords:$},mounted(){this.getCfCfgList()},data(){return{addCfCfgDialog:!1,addCfCfgLoading:!1,updateCfCfgDialog:!1,updateCfCfgLoading:!1,showCfDnsRecords:!1,cfCfgId:null,cfCfgName:"",loading:!0,pageParams:{keyword:"",currentPage:1,pageSize:10},cfCfgPageRsp:[{id:"",domain:"",zoneId:"",apiToken:"",createTime:""}],total:0,batchSelected:[],removeIds:[],AddCfCfgParams:{domain:"",zoneId:"",apiToken:""},UpdateCfCfgParams:{id:"",domain:"",zoneId:"",apiToken:""}}},methods:{async getCfCfgList(){this.loading=!0,await this.$axios.post("/cf/listCfg",{...this.pageParams}).then((e=>{e.data.success?(this.cfCfgPageRsp=e.data.data.records,this.total=e.data.data.total):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.cleanCache()}))},async batchRemove(){const e=await(0,M.Z)("确定要删除配置吗？","删除 Cloudflare 配置");e?(this.loading=!0,this.removeIds=this.batchSelected.map((e=>e.id)),await this.$axios.post("/cf/removeBatch",{idList:this.removeIds}).then((e=>{e.data.success?(0,C.nk)({message:"删除 Cloudflare 配置成功",type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3}),this.getCfCfgList()})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},async addCfCfg(){const e=await(0,M.Z)("确定要新增配置吗？","新增 Cloudflare 配置");e?(this.addCfCfgLoading=!0,await this.$axios.post("/cf/add",{...this.AddCfCfgParams}).then((e=>{e.data.success?((0,C.nk)({message:"新增 Cloudflare 配置成功",type:"success",duration:2e3}),this.addCfCfgDialog=!1):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3}),this.getCfCfgList()})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},async updateCfCfg(){const e=await(0,M.Z)("确定要修改配置吗？","修改 Cloudflare 配置");e?(this.updateCfCfgLoading=!0,await this.$axios.post("/cf/update",{...this.UpdateCfCfgParams}).then((e=>{e.data.success?((0,C.nk)({message:"修改 Cloudflare 配置成功",type:"success",duration:2e3}),this.updateCfCfgDialog=!1):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3}),this.getCfCfgList()})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},handleUpdateCfCfg(e){this.UpdateCfCfgParams.id=e.id,this.UpdateCfCfgParams.domain=e.domain,this.UpdateCfCfgParams.zoneId=e.zoneId,this.UpdateCfCfgParams.apiToken=e.apiToken,this.updateCfCfgDialog=!0},cleanCache(){this.batchSelected=[],this.AddCfCfgParams={},this.loading=!1,this.addCfCfgLoading=!1,this.updateCfCfgLoading=!1},handleRemove(e){this.batchSelected.push(e),this.batchRemove()},handleCfDnsRecords(e){this.cfCfgId=e.id,this.cfCfgName=e.domain,this.showCfDnsRecords=!0},handlePageChange(e){this.pageParams.currentPage=e,this.getCfCfgList()},handleSizeChange(e){this.pageParams.currentPage=1,this.pageParams.pageSize=e,this.getCfCfgList()},handleSelectionChange(e){this.batchSelected=e}}};const Q=(0,k.A)(X,[["render",A],["__scopeId","data-v-7edd8e6f"]]);var Z=Q,K=t(74889);const j={style:{"overflow-x":"auto"}},q={class:"dialog-footer"};function G(e,a,t,d,o,s){const n=(0,l.g2)("el-button"),r=(0,l.g2)("el-input"),i=(0,l.g2)("el-table-column"),c=(0,l.g2)("el-tag"),p=(0,l.g2)("el-tooltip"),u=(0,l.g2)("el-table"),g=(0,l.g2)("el-pagination"),f=(0,l.g2)("el-form-item"),m=(0,l.g2)("el-form"),h=(0,l.g2)("el-dialog"),C=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[(0,l.bF)(n,{type:"success",style:{"margin-bottom":"20px"},onClick:s.getMapDataList},{default:(0,l.k6)((()=>a[9]||(a[9]=[(0,l.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,l.bF)(r,{modelValue:o.pageParams.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>o.pageParams.keyword=e),placeholder:"模糊搜索",onInput:s.getMapDataList,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"400px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,l.bF)(n,{type:"primary",onClick:a[1]||(a[1]=e=>o.addMapData=!0),style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[10]||(a[10]=[(0,l.eW)(" 新增IP数据 ")]))),_:1}),(0,l.bF)(n,{type:"primary",onClick:s.updateOciCfgIpData,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[11]||(a[11]=[(0,l.eW)(" 同步已有的oci配置最新数据 ")]))),_:1},8,["onClick"]),(0,l.bF)(n,{type:"danger",onClick:s.batchRemove,disabled:!o.batchSelected.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[12]||(a[12]=[(0,l.eW)(" 批量删除 ")]))),_:1},8,["onClick","disabled"]),(0,l.Lk)("div",j,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(u,{data:o.mapDataPageRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:s.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(i,{type:"selection",width:"35"}),(0,l.bF)(i,{label:"IP地址",width:"260"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.ip,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"success",onClick:a=>s.copyToClipboard(e.ip)},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.ip),1)])),_:2},1032,["onClick"])])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"国家"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.country,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.country),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"地区"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.area,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.area),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"城市"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.city,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.city),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"组织"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.org,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.org),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"ASN"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.asn,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"warning"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.asn),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"纬度"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.lat,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.lat),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"经度"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.lng,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)((0,V.v_)(e.lng),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(i,{label:"操作",width:"220"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(n,{onClick:a=>s.updateIpInfo(e),type:"success",link:""},{default:(0,l.k6)((()=>a[13]||(a[13]=[(0,l.eW)(" 更新IP信息 ")]))),_:2},1032,["onClick"]),(0,l.bF)(n,{onClick:a=>s.handleRemove(e),type:"danger",link:""},{default:(0,l.k6)((()=>a[14]||(a[14]=[(0,l.eW)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[C,o.loading]])]),(0,l.bF)(g,{onCurrentChange:s.handlePageChange,onSizeChange:s.handleSizeChange,"current-page":o.pageParams.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>o.pageParams.currentPage=e),"page-size":o.pageParams.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>o.pageParams.pageSize=e),"page-sizes":[5,10,20,50],total:o.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])]),(0,l.bF)(h,{modelValue:o.addMapData,"onUpdate:modelValue":a[7]||(a[7]=e=>o.addMapData=e),title:"新增地图IP数据",width:"40%",onClose:a[8]||(a[8]=e=>o.addMapData=!1)},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",q,[(0,l.bF)(n,{type:"info",onClick:a[5]||(a[5]=e=>o.addMapData=!1)},{default:(0,l.k6)((()=>a[15]||(a[15]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(n,{type:"primary",onClick:a[6]||(a[6]=e=>s.addIpData()),loading:o.addIpDataLoading},{default:(0,l.k6)((()=>a[16]||(a[16]=[(0,l.eW)("新增")]))),_:1},8,["loading"])])])),default:(0,l.k6)((()=>[(0,l.bF)(m,{"label-width":"200px"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{label:"IP地址（支持v4、v6）","label-width":"150px"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"cf-input",modelValue:o.addIpDataParams.ip,"onUpdate:modelValue":a[4]||(a[4]=e=>o.addIpDataParams.ip=e),placeholder:"请输入IP地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var H={components:{},mounted(){this.getMapDataList()},data(){return{addMapData:!1,addIpDataLoading:!1,removeIpDataLoading:!1,updateIpDataLoading:!1,loading:!0,pageParams:{keyword:"",currentPage:1,pageSize:10},addIpDataParams:{ip:""},mapDataPageRsp:[{id:"1",ip:"1.1.1.1",country:"AU",area:"New South Wales",city:"Sydney",org:"CLOUDFLARENET",asn:"AS13335",lat:-33.859336,lng:151.203624,createTime:"2025-07-30 15:08:47"}],total:0,batchSelected:[],removeIds:[]}},methods:{copyToClipboard:M.l,async getMapDataList(){this.loading=!0,await this.$axios.post("/ipData/page",{...this.pageParams}).then((e=>{e.data.success?(this.mapDataPageRsp=e.data.data.records,this.total=e.data.data.total,(0,C.nk)({message:"获取IP数据列表成功",type:"success",duration:2e3})):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.cleanCache()}))},async addIpData(){this.addIpDataLoading=!0,await this.$axios.post("/ipData/add",{...this.addIpDataParams}).then((e=>{e.data.success?(0,C.nk)({message:"新增IP数据成功",type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.cleanCache(),this.getMapDataList()}))},async updateOciCfgIpData(){const e=await(0,M.Z)("确定要同步所有已存在的oci配置的最新IP数据吗？","同步已有的oci配置的IP信息");e?(this.loading=!0,this.$axios.post("/ipData/loadOciIpData",{}).then((e=>{e.data.success?(0,C.nk)({message:"同步IP数据任务下发成功，请稍后自行刷新列表查看",type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.cleanCache(),this.getMapDataList()}))):this.$message.info("已取消")},async batchRemove(){const e=await(0,M.Z)("确定要删除IP数据吗？","删除首页地图IP数据");e?(this.removeIpDataLoading=!0,this.removeIds=this.batchSelected.map((e=>e.id)),await this.$axios.post("/ipData/remove",{idList:this.removeIds}).then((e=>{e.data.success?(0,C.nk)({message:"删除IP数据成功",type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.cleanCache(),this.getMapDataList()}))):this.$message.info("已取消")},async updateIpInfo(e){const a=await(0,M.Z)("确定要更新IP："+e.ip+" 的数据信息吗？","更新IP数据");a?(this.updateIpDataLoading=!0,await this.$axios.post("/ipData/update",{id:e.id}).then((e=>{e.data.success?(0,C.nk)({message:"更新IP数据成功",type:"success",duration:2e3}):(0,C.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.cleanCache(),this.getMapDataList()}))):this.$message.info("已取消")},cleanCache(){this.batchSelected=[],this.removeIds=[],this.loading=!1,this.addIpDataLoading=!1,this.removeIpDataLoading=!1,this.updateIpDataLoading=!1,this.addMapData=!1,this.addIpDataParams.ip=""},handleRemove(e){this.batchSelected.push(e),this.batchRemove()},handlePageChange(e){this.pageParams.currentPage=e,this.getMapDataList()},handleSizeChange(e){this.pageParams.currentPage=1,this.pageParams.pageSize=e,this.getMapDataList()},handleSelectionChange(e){this.batchSelected=e}}};const J=(0,k.A)(H,[["render",G]]);var Y=J,ee={data(){return{activeTab:"basicCfg"}},components:{BasicCfg:F,BackUp:R,CloudflareCfg:Z,IpDataView:K["default"],MapData:Y}};const ae=(0,k.A)(ee,[["render",c]]);var te=ae}}]);
//# sourceMappingURL=58.6f7e55ca.js.map