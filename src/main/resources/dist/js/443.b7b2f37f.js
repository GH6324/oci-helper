"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[443,640],{7346:function(e,a,t){t.d(a,{Z:function(){return i},l:function(){return n}});var l=t(2933);async function i(e,a="提示",t="warning"){try{const i=await l.s.confirm(e,a,{confirmButtonText:"确定",cancelButtonText:"取消",type:t});return"confirm"===i}catch(i){return!1}}function n(e){navigator.clipboard.writeText(e).then((()=>{this.$message.success("复制成功！内容："+e)})).catch((()=>{const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),this.$message.success("复制成功！内容："+e)}))}},4443:function(e,a,t){t.r(a),t.d(a,{default:function(){return Re}});var l=t(6768);const i={class:"tab-content"},n={key:0},s={key:1},o={key:2},d={key:3},u={key:4};function r(e,a,t,r,c,p){const g=(0,l.g2)("Avatar"),m=(0,l.g2)("el-icon"),b=(0,l.g2)("el-tab-pane"),h=(0,l.g2)("Cpu"),f=(0,l.g2)("Box"),v=(0,l.g2)("Platform"),y=(0,l.g2)("DataAnalysis"),k=(0,l.g2)("OciTenant"),C=(0,l.g2)("OciInstanceInfo"),I=(0,l.g2)("BootVolumeList"),P=(0,l.g2)("VcnList"),V=(0,l.g2)("TrafficStatistics"),F=(0,l.g2)("el-tabs");return(0,l.uX)(),(0,l.Wv)(F,{type:"border-card",class:"demo-tabs",modelValue:c.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>c.activeTab=e)},{default:(0,l.k6)((()=>[(0,l.bF)(b,{label:"OciTenant",name:"OciTenant"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1}),a[1]||(a[1]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"租户详情",-1))])])),_:1}),(0,l.bF)(b,{label:"OciInstanceInfo",name:"OciInstanceInfo"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(h)])),_:1}),a[2]||(a[2]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"实例详情",-1))])])),_:1}),(0,l.bF)(b,{label:"BootVolumeList",name:"BootVolumeList"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(f)])),_:1}),a[3]||(a[3]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"引导卷列表",-1))])])),_:1}),(0,l.bF)(b,{label:"VcnList",name:"VcnList"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(v)])),_:1}),a[4]||(a[4]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"虚拟云网络",-1))])])),_:1}),(0,l.bF)(b,{label:"Traffic",name:"Traffic"},{label:(0,l.k6)((()=>[(0,l.Lk)("span",null,[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(y)])),_:1}),a[5]||(a[5]=(0,l.Lk)("span",{style:{"margin-left":"5px"}},"流量统计",-1))])])),_:1}),(0,l.Lk)("div",i,["OciTenant"===c.activeTab?((0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(k,{ociCfgId:c.cfgId,username:c.username},null,8,["ociCfgId","username"])])):(0,l.Q3)("",!0),"OciInstanceInfo"===c.activeTab?((0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(C,{"cfg-id":c.cfgId,username:c.username},null,8,["cfg-id","username"])])):(0,l.Q3)("",!0),"BootVolumeList"===c.activeTab?((0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(I,{"cfg-id":c.cfgId,username:c.username},null,8,["cfg-id","username"])])):(0,l.Q3)("",!0),"VcnList"===c.activeTab?((0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(P,{"cfg-id":c.cfgId,username:c.username},null,8,["cfg-id","username"])])):(0,l.Q3)("",!0),"Traffic"===c.activeTab?((0,l.uX)(),(0,l.CE)("div",u,[(0,l.bF)(V,{ociCfgId:c.cfgId,username:c.username},null,8,["ociCfgId","username"])])):(0,l.Q3)("",!0)])])),_:1},8,["modelValue"])}var c=t(4232),p=t(5130);const g={style:{display:"flex","justify-content":"flex-start","align-items":"center","margin-bottom":"20px"}},m={style:{"font-size":"16px","font-weight":"bold","margin-left":"20px"}},b={class:"instance-list"},h={class:"header"},f={style:{"line-height":"1"}},v={style:{display:"flex","align-items":"center",margin:"10px"}},y={style:{display:"flex","align-items":"center",margin:"10px"}},k={style:{display:"flex","align-items":"center",margin:"10px"}},C={style:{display:"flex","align-items":"center",margin:"10px"}},I={style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},P={style:{display:"flex","align-items":"center",margin:"10px"}},V={style:{display:"flex","align-items":"center",margin:"10px"}},F={style:{display:"flex","align-items":"center",margin:"10px"}},L={class:"demo-collapse"},_={style:{"margin-left":"20px"}},R={style:{"margin-left":"20px"}},S={style:{"margin-left":"20px"}},x={style:{"margin-left":"20px"}},w={style:{"margin-left":"20px"}},U={style:{display:"flex","flex-wrap":"wrap",gap:"4px"}},T={style:{"margin-top":"8px"}};function D(e,a,t,i,n,s){const o=(0,l.g2)("el-button"),d=(0,l.g2)("el-divider"),u=(0,l.g2)("cpu"),r=(0,l.g2)("el-icon"),D=(0,l.g2)("el-tag"),E=(0,l.g2)("el-tooltip"),W=(0,l.g2)("el-button-group"),N=(0,l.g2)("info-filled"),B=(0,l.g2)("el-text"),O=(0,l.g2)("el-collapse-item"),$=(0,l.g2)("el-collapse"),X=(0,l.g2)("el-option"),A=(0,l.g2)("el-select"),z=(0,l.g2)("el-form-item"),G=(0,l.g2)("el-input"),M=(0,l.g2)("el-switch"),K=(0,l.g2)("el-input-number"),Q=(0,l.g2)("el-form"),q=(0,l.g2)("el-dialog"),j=(0,l.g2)("el-checkbox"),H=(0,l.g2)("el-col"),Z=(0,l.g2)("el-row");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",g,[(0,l.Lk)("div",null,[(0,l.bF)(o,{onClick:s.goBack},{default:(0,l.k6)((()=>a[14]||(a[14]=[(0,l.eW)("返回配置列表")]))),_:1},8,["onClick"]),(0,l.bF)(o,{onClick:s.reLaunchDetails,loading:n.flushLoading,style:{"margin-left":"10px"}},{default:(0,l.k6)((()=>a[15]||(a[15]=[(0,l.eW)("刷新缓存")]))),_:1},8,["onClick","loading"])]),(0,l.Lk)("span",m,"当前配置："+(0,c.v_)(this.user.username),1)]),(0,l.bF)(d,{class:"divider"}),(0,l.Lk)("div",b,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.ociCfgDetails.instanceList,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.ocId,class:"instance-card"},[(0,l.Lk)("div",h,[(0,l.bF)(r,{class:"server-icon"},{default:(0,l.k6)((()=>[(0,l.bF)(u)])),_:1}),(0,l.Lk)("h3",null,(0,c.v_)(e.name),1)]),(0,l.bF)(d,{class:"divider"}),(0,l.Lk)("div",f,[(0,l.Lk)("p",v,[a[16]||(a[16]=(0,l.Lk)("strong",{style:{"min-width":"100px"}},"Region",-1)),(0,l.bF)(D,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.region),1)])),_:2},1024)]),(0,l.Lk)("p",y,[a[17]||(a[17]=(0,l.Lk)("strong",{style:{"min-width":"100px"}},"状态",-1)),(0,l.bF)(D,{type:-1!==e.state.indexOf("RUNNING")?"success":"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.state),1)])),_:2},1032,["type"])]),(0,l.Lk)("p",k,[a[18]||(a[18]=(0,l.Lk)("strong",{style:{"min-width":"100px"}},"Shape",-1)),(0,l.bF)(D,{type:-1!==e.shape.indexOf("A1")?"success":"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.shape),1)])),_:2},1032,["type"])]),(0,l.Lk)("div",C,[a[19]||(a[19]=(0,l.Lk)("strong",{style:{"min-width":"100px"}},"公网IP",-1)),(0,l.Lk)("div",I,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.publicIp,((e,a)=>((0,l.uX)(),(0,l.Wv)(D,{key:a,effect:"plain",onClick:a=>s.copyToClipboard(e)},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e),1)])),_:2},1032,["onClick"])))),128))])]),(0,l.Lk)("p",P,[a[20]||(a[20]=(0,l.Lk)("strong",{style:{"min-width":"100px"}},"配置",-1)),(0,l.bF)(D,{effect:"plain",type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.ocpus)+" 核 / "+(0,c.v_)(e.memory)+" GB / "+(0,c.v_)(e.bootVolumeSize)+" GB ",1)])),_:2},1024)]),(0,l.Lk)("p",V,[a[21]||(a[21]=(0,l.Lk)("strong",{style:{"min-width":"100px"}},"可用域",-1)),(0,l.bF)(D,{effect:"plain",type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.availabilityDomain),1)])),_:2},1024)]),(0,l.Lk)("p",F,[a[22]||(a[22]=(0,l.Lk)("strong",{style:{"min-width":"100px"}},"创建时间",-1)),(0,l.bF)(D,{effect:"plain",type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.createTime),1)])),_:2},1024)])]),(0,l.bF)(d,{class:"divider"}),(0,l.bF)(W,{class:"ml-4"},{default:(0,l.k6)((()=>[(0,l.bF)(E,{content:"更换IP",placement:"bottom"},{default:(0,l.k6)((()=>[1!==e.enableChangeIp?((0,l.uX)(),(0,l.Wv)(o,{key:0,onClick:a=>s.handleChangeIp(e.ocId),icon:"HelpFilled"},null,8,["onClick"])):(0,l.Q3)("",!0)])),_:2},1024),(0,l.bF)(E,{content:"停止更换IP",placement:"bottom"},{default:(0,l.k6)((()=>[1===e.enableChangeIp?((0,l.uX)(),(0,l.Wv)(o,{key:0,onClick:a=>s.handleStopChangeIp(e.ocId),icon:"HelpFilled",type:"danger"},null,8,["onClick"])):(0,l.Q3)("",!0)])),_:2},1024),(0,l.bF)(E,{content:"编辑实例配置",placement:"bottom"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{onClick:a=>s.handleUpdateInstanceCfg(e.ocId),icon:"Edit",type:"primary"},null,8,["onClick"])])),_:2},1024),(0,l.bF)(E,{content:"启动实例",placement:"bottom"},{default:(0,l.k6)((()=>[-1===e.state.indexOf("RUNNING")?((0,l.uX)(),(0,l.Wv)(o,{key:0,type:"success",icon:"VideoPlay",disabled:-1!==e.state.indexOf("RUNNING"),onClick:a=>s.updateInstanceState(e.ocId,"START")},null,8,["disabled","onClick"])):(0,l.Q3)("",!0)])),_:2},1024),(0,l.bF)(E,{content:"停止实例",placement:"bottom"},{default:(0,l.k6)((()=>[-1===e.state.indexOf("STOPPED")?((0,l.uX)(),(0,l.Wv)(o,{key:0,type:"info",icon:"VideoPause",disabled:-1!==e.state.indexOf("STOPPED"),onClick:a=>s.updateInstanceState(e.ocId,"STOP")},null,8,["disabled","onClick"])):(0,l.Q3)("",!0)])),_:2},1024),(0,l.bF)(E,{content:"重启实例",placement:"bottom"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{type:"warning",icon:"Refresh",onClick:a=>s.updateInstanceState(e.ocId,"RESET")},null,8,["onClick"])])),_:2},1024),(0,l.bF)(E,{content:"终止实例（操作不可逆，请谨慎操作）",placement:"bottom"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{type:"danger",icon:"Delete",disabled:-1!==e.state.indexOf("TERMINATING"),onClick:a=>s.handleTerminateInstance(e.ocId)},null,8,["disabled","onClick"])])),_:2},1024),(0,l.bF)(E,{content:"启动 Cloud Shell 连接",placement:"bottom"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{type:"success",icon:"HelpFilled",onClick:a=>s.startVnc(e.ocId)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])))),128))]),(0,l.Lk)("div",L,[(0,l.bF)($,{accordion:""},{default:(0,l.k6)((()=>[(0,l.bF)(O,{name:"1"},{title:(0,l.k6)((()=>[(0,l.bF)(r,{class:"header-icon"},{default:(0,l.k6)((()=>[(0,l.bF)(N)])),_:1}),a[23]||(a[23]=(0,l.eW)(" API配置详情（点击向下⬇展开） "))])),default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("span",_,[(0,l.bF)(B,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)("region="+(0,c.v_)(this.ociCfgDetails.region),1)])),_:1})])]),(0,l.Lk)("div",null,[(0,l.Lk)("span",R,[(0,l.bF)(B,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)("user="+(0,c.v_)(this.ociCfgDetails.userId),1)])),_:1})])]),(0,l.Lk)("div",null,[(0,l.Lk)("span",S,[(0,l.bF)(B,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)("tenancy="+(0,c.v_)(this.ociCfgDetails.tenantId),1)])),_:1})])]),(0,l.Lk)("div",null,[(0,l.Lk)("span",x,[(0,l.bF)(B,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)("fingerprint="+(0,c.v_)(this.ociCfgDetails.fingerprint),1)])),_:1})])]),(0,l.Lk)("div",null,[(0,l.Lk)("span",w,[(0,l.bF)(B,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)("key_file="+(0,c.v_)(this.ociCfgDetails.privateKeyPath),1)])),_:1})])])])),_:1})])),_:1})]),(0,l.bF)(q,{modelValue:n.dialogVisible,"onUpdate:modelValue":a[8]||(a[8]=e=>n.dialogVisible=e),title:"可指定多个 CIDR 网段，回车保存，传空则随机更换一个IP",width:"50%",onClose:s.handleDialogClose},{footer:(0,l.k6)((()=>[(0,l.bF)(o,{onClick:s.handleDialogClose},{default:(0,l.k6)((()=>a[25]||(a[25]=[(0,l.eW)("取消")]))),_:1},8,["onClick"]),(0,l.bF)(o,{type:"primary",onClick:s.changeIp,loading:n.changeIpLoading},{default:(0,l.k6)((()=>a[26]||(a[26]=[(0,l.eW)(" 新增更换IP任务 ")]))),_:1},8,["onClick","loading"])])),default:(0,l.k6)((()=>[(0,l.bF)(Q,{model:n.changeIpParams,"label-width":"100px",class:"form-section"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{label:"选择VNIC"},{default:(0,l.k6)((()=>[(0,l.bF)(A,{modelValue:n.changeIpParams.vnicId,"onUpdate:modelValue":a[0]||(a[0]=e=>n.changeIpParams.vnicId=e),placeholder:"请选择vnic",style:{width:"100%"}},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.vnicList,(e=>((0,l.uX)(),(0,l.Wv)(X,{key:e.vnicId,label:e.name,value:e.vnicId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(z,{label:"CIDR列表"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",U,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.changeIpParams.cidrList,(e=>((0,l.uX)(),(0,l.Wv)(D,{key:e,closable:"",onClose:a=>s.handleClose(e)},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e),1)])),_:2},1032,["onClose"])))),128))]),(0,l.Lk)("div",T,[n.inputVisible?((0,l.uX)(),(0,l.Wv)(G,{key:0,ref:"InputRef",modelValue:n.inputValue,"onUpdate:modelValue":a[1]||(a[1]=e=>n.inputValue=e),class:"w-20",onKeyup:(0,p.jR)(s.handleInputConfirm,["enter"]),onBlur:s.handleInputConfirm,placeholder:"回车添加CIDR"},null,8,["modelValue","onKeyup","onBlur"])):((0,l.uX)(),(0,l.Wv)(o,{key:1,class:"button-new-tag",size:"small",onClick:s.showInput},{default:(0,l.k6)((()=>a[24]||(a[24]=[(0,l.eW)(" + 新增 CIDR 网段 ")]))),_:1},8,["onClick"]))])])),_:1}),(0,l.bF)(z,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,{class:"divider"})])),_:1}),(0,l.bF)(z,null,{default:(0,l.k6)((()=>[(0,l.bF)(o,{type:"text",onClick:a[2]||(a[2]=e=>n.advancedVisible=!n.advancedVisible)},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.advancedVisible?"收起 Cloudflare DNS 设置":"点击展开 Cloudflare DNS 设置"),1)])),_:1})])),_:1}),n.advancedVisible?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(z,{label:"域名前缀"},{default:(0,l.k6)((()=>[(0,l.bF)(G,{modelValue:n.changeIpParams.domainPrefix,"onUpdate:modelValue":a[3]||(a[3]=e=>n.changeIpParams.domainPrefix=e),placeholder:"输入前缀"},null,8,["modelValue"])])),_:1}),(0,l.bF)(z,{label:"选择域名"},{default:(0,l.k6)((()=>[(0,l.bF)(A,{modelValue:n.changeIpParams.selectedDomainCfgId,"onUpdate:modelValue":a[4]||(a[4]=e=>n.changeIpParams.selectedDomainCfgId=e),placeholder:"请选择域名",style:{width:"100%"}},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.ociCfgDetails.cfCfgList,(e=>((0,l.uX)(),(0,l.Wv)(X,{key:e.cfCfgId,label:e.domain,value:e.cfCfgId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(z,{label:"开启代理加速"},{default:(0,l.k6)((()=>[(0,l.bF)(M,{modelValue:n.changeIpParams.enableProxy,"onUpdate:modelValue":a[5]||(a[5]=e=>n.changeIpParams.enableProxy=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(z,{label:"TTL（秒）"},{default:(0,l.k6)((()=>[(0,l.bF)(K,{modelValue:n.changeIpParams.ttl,"onUpdate:modelValue":a[6]||(a[6]=e=>n.changeIpParams.ttl=e),min:60,max:86400,step:60,placeholder:"单位：秒"},null,8,["modelValue"])])),_:1}),(0,l.bF)(z,{label:"备注"},{default:(0,l.k6)((()=>[(0,l.bF)(G,{type:"textarea",modelValue:n.changeIpParams.remark,"onUpdate:modelValue":a[7]||(a[7]=e=>n.changeIpParams.remark=e),placeholder:"输入备注信息"},null,8,["modelValue"])])),_:1})],64)):(0,l.Q3)("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"]),(0,l.bF)(q,{title:"终止实例",modelValue:n.terminateDialogVisible,"onUpdate:modelValue":a[12]||(a[12]=e=>n.terminateDialogVisible=e),width:"500px",onClose:a[13]||(a[13]=e=>n.terminateDialogVisible=!1)},{footer:(0,l.k6)((()=>[(0,l.bF)(o,{onClick:a[11]||(a[11]=e=>n.terminateDialogVisible=!1)},{default:(0,l.k6)((()=>a[29]||(a[29]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(o,{onClick:s.sendCaptcha,loading:n.sendLoading},{default:(0,l.k6)((()=>a[30]||(a[30]=[(0,l.eW)("发送验证码")]))),_:1},8,["onClick","loading"]),(0,l.bF)(o,{type:"danger",disabled:""===n.form.verificationCode,loading:n.terminateLoading,onClick:s.terminateInstance},{default:(0,l.k6)((()=>a[31]||(a[31]=[(0,l.eW)(" 确认终止 ")]))),_:1},8,["disabled","loading","onClick"])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[a[28]||(a[28]=(0,l.Lk)("p",null,"终止实例将不可恢复，请确认以下选项：",-1)),(0,l.bF)(Z,null,{default:(0,l.k6)((()=>[(0,l.bF)(H,{span:24},{default:(0,l.k6)((()=>[(0,l.bF)(j,{modelValue:n.retainBootVolume,"onUpdate:modelValue":a[9]||(a[9]=e=>n.retainBootVolume=e)},{default:(0,l.k6)((()=>a[27]||(a[27]=[(0,l.eW)(" 保留引导卷及数据 ")]))),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,l.bF)(d,{class:"divider"}),(0,l.bF)(Z,null,{default:(0,l.k6)((()=>[(0,l.bF)(H,{span:24},{default:(0,l.k6)((()=>[(0,l.bF)(Q,{model:n.form,ref:"form","label-width":"70px"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{label:"验证码"},{default:(0,l.k6)((()=>[(0,l.bF)(G,{modelValue:n.form.verificationCode,"onUpdate:modelValue":a[10]||(a[10]=e=>n.form.verificationCode=e),placeholder:"请输入验证码",maxlength:"10",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])])),_:1},8,["modelValue"])],64)}t(4114),t(8992),t(2577);var E=t(1219),W=t(2933),N=t(5320),B=t(7477),O=t(7346),$={components:{cpu:B.cpu},data(){return{advancedVisible:!1,flushLoading:!1,changeIpLoading:!1,sendLoading:!1,dialogVisible:!1,terminateDialogVisible:!1,terminateLoading:!1,retainBootVolume:!1,form:{verificationCode:""},inputVisible:!1,inputValue:"",user:{},changeIpParams:{ociCfgId:"",instanceId:"",cidrList:[],changeCfDns:!1,vnicId:"",domainPrefix:"",selectedDomainCfgId:"",enableProxy:!1,ttl:60,remark:""},vnicList:[],ociCfgDetails:{},UpdateInstanceStateParams:{ociCfgId:"",instanceId:"",action:""},SendCaptchaParams:{ociCfgId:"",instanceId:""},TerminateInstanceParams:{ociCfgId:"",instanceId:"",preserveBootVolume:0,captcha:""},GetOciCfgDetailsParams:{cfgId:"",cleanReLaunchDetails:!1},compartmentId:""}},mounted(){this.user.id=this.$route.query.cfgId,this.user.username=this.$route.query.username,this.changeIpParams.ociCfgId=this.$route.query.cfgId,this.GetOciCfgDetailsParams.cfgId=this.$route.query.cfgId,this.getOciCfgDetails()},methods:{copyToClipboard:O.l,goBack(){this.$router.back()},handleClose(e){const a=this.changeIpParams.cidrList.indexOf(e);-1!==a&&this.changeIpParams.cidrList.splice(a,1)},handleDialogClose(){this.dialogVisible=!1,this.changeIpParams.vnicId="",this.changeIpParams.cidrList=[]},handleStopChangeIp(e){const a=window.confirm("确定要停止更换IP任务吗?");a?this.stopChangeIp(e):this.$message.info("已取消")},handleUpdateInstanceCfg(e){this.$router.push({path:"/dashboard/ociUpdateInstanceCfg",query:{ocId:e,ociCfgId:this.user.id,username:this.user.username}})},stopChangeIp(e){this.$axios.post("/oci/stopChangeIp",{instanceId:e}).then((e=>{e.data.success?(0,E.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3}),this.reLaunchDetails()})).catch((e=>{console.error("Error:",e)}))},showInput(){this.inputVisible=!0,this.$nextTick((()=>{this.$refs.InputRef.focus()}))},handleInputConfirm(){this.inputValue&&!this.changeIpParams.cidrList.includes(this.inputValue)&&this.changeIpParams.cidrList.push(this.inputValue),this.inputValue="",this.inputVisible=!1},reLaunchDetails(){this.GetOciCfgDetailsParams.cleanReLaunchDetails=!0,this.getOciCfgDetails(),this.GetOciCfgDetailsParams.cleanReLaunchDetails=!1},async getOciCfgDetails(){this.ociCfgDetails.instanceList=[],this.flushLoading=!0,await this.$axios.post("/oci/details",{cfgId:this.changeIpParams.ociCfgId,cleanReLaunchDetails:this.GetOciCfgDetailsParams.cleanReLaunchDetails}).then((e=>{e.data.success?(this.ociCfgDetails=e.data.data,(0,E.nk)({message:e.data.msg,type:"success",duration:2e3}),this.flushLoading=!1):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},handleChangeIp(e){this.dialogVisible=!0,this.changeIpParams.instanceId=e,this.vnicList=this.ociCfgDetails.instanceList.find((a=>a.ocId===e))?.vnicList},changeIp(){this.changeIpLoading=!0,this.changeIpParams.changeCfDns=this.advancedVisible,this.$axios.post("/oci/changeIp",{...this.changeIpParams}).then((e=>{e.data.success?((0,E.nk)({message:e.data.msg,type:"success",duration:2e3}),this.changeIpLoading=!1,this.dialogVisible=!1,this.reLaunchDetails()):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.changeIpLoading=!1}))},async updateInstanceState(e,a){let t="";switch(a){case"START":t="确定要启动实例吗？";break;case"STOP":t="确定要停止实例吗？";break;case"RESET":t="确定要重新启动实例吗？";break;default:t="确定要执行此操作吗？"}try{const l=await W.s.confirm(t,"确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===l&&(this.UpdateInstanceStateParams.ociCfgId=this.user.id,this.UpdateInstanceStateParams.instanceId=e,this.UpdateInstanceStateParams.action=a,await this.$axios.post("/oci/updateInstanceState",{...this.UpdateInstanceStateParams}).then((e=>{e.data.success?((0,E.nk)({message:e.data.msg,type:"success",duration:2e3}),this.getOciCfgDetails()):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e),(0,E.nk)({message:"更新实例状态时出错",type:"error",duration:2e3})})))}catch(l){(0,E.nk)({message:"操作已取消",type:"info",duration:2e3})}},handleTerminateInstance(e){this.TerminateInstanceParams.instanceId=e,this.terminateDialogVisible=!0},sendCaptcha(){this.sendLoading=!0,this.SendCaptchaParams.ociCfgId=this.user.id,this.SendCaptchaParams.instanceId=this.TerminateInstanceParams.instanceId,this.$axios.post("/oci/sendCaptcha",{...this.SendCaptchaParams}).then((e=>{e.data.success?((0,E.nk)({message:e.data.msg,type:"success",duration:2e3}),this.changeIpLoading=!1,this.dialogVisible=!1,this.sendLoading=!1):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async terminateInstance(){this.terminateLoading=!0,this.TerminateInstanceParams.ociCfgId=this.user.id,this.TerminateInstanceParams.preserveBootVolume=!0===this.retainBootVolume?1:0,this.TerminateInstanceParams.captcha=this.form.verificationCode,this.$axios.post("/oci/terminateInstance",{...this.TerminateInstanceParams}).then((e=>{e.data.success?((0,E.nk)({message:e.data.msg,type:"success",duration:2e3}),this.getOciCfgDetails()):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e),(0,E.nk)({message:"终止实例时发生错误",type:"error",duration:2e3})})).finally((()=>{this.terminateLoading=!1,this.terminateDialogVisible=!1}))},async startVnc(e){const a=await(0,O.Z)("确定要连接到该实例吗？","Cloud Shell");if(!a)return void this.$message.info("已取消");const t=N.Ks.service({lock:!0,text:"正在启动 VNC 连接，请稍候...",background:"rgba(0, 0, 0, 0.5)"});this.$axios.post("/oci/startVnc",{ociCfgId:this.user.id,instanceId:e,compartmentId:this.compartmentId}).then((e=>{if(e.data.success){let a;if(t.close(),"http:"===location.protocol){const e=location.hostname;a=`http://${e}:6080`}else a=`${location.protocol}//${location.host}/myvnc`;const l=`${a}/vnc.html?autoconnect=true`;(0,W.s)({title:"🎉 VNC 连接成功 🎉",message:`${e.data.msg} VNC 连接创建成功！页面即将自动跳转~<br><br>连接地址：${l}<br><br>❗如被浏览器拦截，请复制连接地址进行访问，如果没有配置反向代理，需要放行部署探长的服务器的 6080 端口。`,dangerouslyUseHTMLString:!0,confirmButtonText:"知道了",showClose:!0}),setTimeout((()=>{window.open(l,"_blank")}),4e3)}else(0,E.nk)({message:e.data.msg,type:"error",duration:2e3}),t.close()})).catch((()=>{(0,E.nk)({message:"连接时发生错误",type:"error",duration:2e3}),t.close()}))}}},X=t(1241);const A=(0,X.A)($,[["render",D]]);var z=A;const G={style:{"font-size":"16px","font-weight":"bold"}},M={style:{"overflow-x":"auto"}},K={style:{"margin-left":"10px"}};function Q(e,a,t,i,n,s){const o=(0,l.g2)("el-divider"),d=(0,l.g2)("el-button"),u=(0,l.g2)("el-input"),r=(0,l.g2)("el-table-column"),p=(0,l.g2)("el-tooltip"),g=(0,l.g2)("el-tag"),m=(0,l.g2)("el-table"),b=(0,l.g2)("el-pagination"),h=(0,l.g2)("el-input-number"),f=(0,l.g2)("el-col"),v=(0,l.g2)("el-slider"),y=(0,l.g2)("el-row"),k=(0,l.g2)("el-dialog"),C=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("span",G,"当前配置："+(0,c.v_)(this.username),1),(0,l.bF)(o,{class:"divider"}),(0,l.Lk)("div",null,[(0,l.bF)(d,{type:"success",style:{"margin-bottom":"20px"},onClick:s.cleanReLaunch},{default:(0,l.k6)((()=>a[8]||(a[8]=[(0,l.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,l.bF)(u,{modelValue:n.pageParams.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>n.pageParams.keyword=e),placeholder:"模糊搜索",onInput:s.getBvList,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"200px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,l.bF)(d,{type:"danger",onClick:s.batchTerminate,disabled:!n.batchSelected.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[9]||(a[9]=[(0,l.eW)(" 批量终止 ")]))),_:1},8,["onClick","disabled"]),(0,l.Lk)("div",M,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(m,{data:n.BootVolumesRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:s.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(r,{type:"selection",width:"35",selectable:s.isSelectable},null,8,["selectable"]),(0,l.bF)(r,{fixed:"",label:"名称",width:"300"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.displayName,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.displayName),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(r,{label:"可用域"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.availabilityDomain,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{type:"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.availabilityDomain),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(r,{label:"状态"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(g,{type:"AVAILABLE"===e.lifecycleState?"success":"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.lifecycleState),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(r,{label:"已附加实例"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.instanceName,placement:"top"},{default:(0,l.k6)((()=>[null!==e.instanceName?((0,l.uX)(),(0,l.Wv)(g,{key:0,type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.instanceName),1)])),_:2},1024)):(0,l.Q3)("",!0)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(r,{prop:"vpusPerGB",label:"VPU"}),(0,l.bF)(r,{prop:"sizeInGBs",label:"硬盘（GB）"}),(0,l.bF)(r,{prop:"timeCreated",label:"创建时间"}),(0,l.bF)(r,{fixed:"right",label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(d,{onClick:a=>s.handleUpdateBootVolume(e),type:"primary",link:""},{default:(0,l.k6)((()=>a[10]||(a[10]=[(0,l.eW)(" 编辑 ")]))),_:2},1032,["onClick"]),(0,l.bF)(d,{onClick:a=>s.handleTerminate(e),type:"danger",link:"",disabled:e.attached},{default:(0,l.k6)((()=>a[11]||(a[11]=[(0,l.eW)(" 终止 ")]))),_:2},1032,["onClick","disabled"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[C,n.loading]])]),(0,l.bF)(b,{onCurrentChange:s.handlePageChange,onSizeChange:s.handleSizeChange,"current-page":n.pageParams.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>n.pageParams.currentPage=e),"page-size":n.pageParams.pageSize,"onUpdate:pageSize":a[2]||(a[2]=e=>n.pageParams.pageSize=e),"page-sizes":[5,10,20,50],total:n.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])]),(0,l.bF)(k,{title:"更改引导卷配置",modelValue:n.updateBvDialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>n.updateBvDialogVisible=e),width:"500px",onClose:a[7]||(a[7]=e=>n.updateBvDialogVisible=!1)},{footer:(0,l.k6)((()=>[(0,l.bF)(y,{type:"flex",justify:"end",style:{"margin-top":"20px"}},{default:(0,l.k6)((()=>[(0,l.bF)(d,{onClick:a[5]||(a[5]=e=>n.updateBvDialogVisible=!1)},{default:(0,l.k6)((()=>a[14]||(a[14]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(d,{type:"primary",loading:n.updateBvLoading,onClick:s.updateBootVolume},{default:(0,l.k6)((()=>a[15]||(a[15]=[(0,l.eW)(" 确认修改 ")]))),_:1},8,["loading","onClick"])])),_:1})])),default:(0,l.k6)((()=>[(0,l.bF)(y,{gutter:20,align:"middle",style:{"margin-top":"20px"}},{default:(0,l.k6)((()=>[(0,l.bF)(f,{span:24,style:{"margin-bottom":"10px"}},{default:(0,l.k6)((()=>[a[12]||(a[12]=(0,l.Lk)("span",{style:{"font-size":"14px","font-weight":"bold"}},"引导卷磁盘大小（GB）：",-1)),(0,l.bF)(h,{modelValue:n.UpdateBootVolumeParams.bootVolumeSize,"onUpdate:modelValue":a[3]||(a[3]=e=>n.UpdateBootVolumeParams.bootVolumeSize=e),min:47,label:"引导卷大小",style:{"margin-left":"10px"}},null,8,["modelValue"])])),_:1}),(0,l.bF)(f,{span:24},{default:(0,l.k6)((()=>[a[13]||(a[13]=(0,l.Lk)("span",{style:{"font-size":"14px","font-weight":"bold"}},"引导卷 VPU：",-1)),(0,l.bF)(v,{modelValue:n.UpdateBootVolumeParams.bootVolumeVpu,"onUpdate:modelValue":a[4]||(a[4]=e=>n.UpdateBootVolumeParams.bootVolumeVpu=e),min:10,max:120,step:10,label:"引导卷VPU大小",style:{"margin-left":"10px","max-width":"70%"}},null,8,["modelValue"]),(0,l.Lk)("span",K,"当前 VPU: "+(0,c.v_)(n.selectedBvVpu),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}t(1454);var q={mounted(){this.pageParams.ociCfgId=this.$route.query.cfgId,this.TerminateBootVolumeParams.ociCfgId=this.$route.query.cfgId,this.UpdateBootVolumeParams.ociCfgId=this.$route.query.cfgId,this.username=this.$route.query.username,this.getBvList()},data(){return{username:"",pageParams:{cleanReLaunch:!1,ociCfgId:"",keyword:"",currentPage:1,pageSize:10},total:0,BootVolumesRsp:[],batchSelected:[],TerminateBootVolumeParams:{ociCfgId:"",bootVolumeIds:[]},loading:!0,updateBvDialogVisible:!1,updateBvLoading:!1,selectedBvVpu:"",UpdateBootVolumeParams:{ociCfgId:"",bootVolumeId:"",bootVolumeSize:"",bootVolumeVpu:""}}},methods:{async getBvList(){await this.$axios.post("/bootVolume/page",{...this.pageParams}).then((e=>{e.data.success?(this.BootVolumesRsp=e.data.data.records,this.total=e.data.data.total):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3}),this.loading=!1})).catch((e=>{console.error("Error:",e)}))},cleanReLaunch(){this.pageParams.cleanReLaunch=!0,this.loading=!0,this.getBvList(),this.pageParams.cleanReLaunch=!1},async batchTerminate(){const e=window.confirm("确定要终止引导卷吗");e?(this.TerminateBootVolumeParams.bootVolumeIds=this.batchSelected.map((e=>e.id)),await this.$axios.post("/bootVolume/terminate",{...this.TerminateBootVolumeParams}).then((e=>{e.data.success?((0,E.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cleanReLaunch(),this.batchSelected=[],this.TerminateBootVolumeParams.bootVolumeIds=[]):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},handleTerminate(e){this.batchSelected.push(e),this.batchTerminate()},handleUpdateBootVolume(e){this.updateBvDialogVisible=!0,this.UpdateBootVolumeParams.bootVolumeId=e.id,this.UpdateBootVolumeParams.bootVolumeSize=e.sizeInGBs,this.selectedBvVpu=e.vpusPerGB},async updateBootVolume(){const e=window.confirm("确定要更改引导卷配置吗");if(!e)return this.$message.info("已取消"),void(this.updateBvDialogVisible=!1);this.updateBvLoading=!0,await this.$axios.post("/bootVolume/update",{...this.UpdateBootVolumeParams}).then((e=>{e.data.success?((0,E.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cleanReLaunch()):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.updateBvLoading=!1,this.updateBvDialogVisible=!1}))},isSelectable(e){return!e.attached},handlePageChange(e){this.pageParams.currentPage=e,this.getBvList()},handleSizeChange(e){this.pageParams.currentPage=1,this.pageParams.pageSize=e,this.getBvList()},handleSelectionChange(e){this.batchSelected=e}}};const j=(0,X.A)(q,[["render",Q]]);var H=j;const Z={style:{"font-size":"16px","font-weight":"bold"}},J={key:0,style:{"font-size":"16px","font-weight":"bold","margin-left":"20px"}},Y={key:1},ee={style:{"overflow-x":"auto"}},ae={key:2};function te(e,a,t,i,n,s){const o=(0,l.g2)("el-divider"),d=(0,l.g2)("el-button"),u=(0,l.g2)("el-input"),r=(0,l.g2)("el-table-column"),p=(0,l.g2)("el-tooltip"),g=(0,l.g2)("el-tag"),m=(0,l.g2)("el-table"),b=(0,l.g2)("el-pagination"),h=(0,l.g2)("SecurityRuleList"),f=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("span",Z,"当前配置："+(0,c.v_)(this.username),1),n.showSecurityRuleList?((0,l.uX)(),(0,l.CE)("span",J,"当前VCN："+(0,c.v_)(this.vcnName),1)):(0,l.Q3)("",!0),(0,l.bF)(o,{class:"divider"}),n.showSecurityRuleList?((0,l.uX)(),(0,l.CE)("div",ae,[(0,l.bF)(d,{onClick:a[3]||(a[3]=e=>n.showSecurityRuleList=!1)},{default:(0,l.k6)((()=>a[8]||(a[8]=[(0,l.eW)("返回VCN列表")]))),_:1}),(0,l.bF)(h,{ociCfgId:n.ociCfgId,username:n.username,vcnId:n.vcnId,vcnName:n.vcnName},null,8,["ociCfgId","username","vcnId","vcnName"])])):((0,l.uX)(),(0,l.CE)("div",Y,[(0,l.bF)(d,{type:"success",style:{"margin-bottom":"20px"},onClick:s.reloadVcnList},{default:(0,l.k6)((()=>a[4]||(a[4]=[(0,l.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,l.bF)(u,{modelValue:n.pageParams.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>n.pageParams.keyword=e),placeholder:"模糊搜索",onInput:s.getVcnList,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"200px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,l.bF)(d,{type:"danger",onClick:s.batchRemove,disabled:!n.batchSelected.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[5]||(a[5]=[(0,l.eW)(" 批量删除 ")]))),_:1},8,["onClick","disabled"]),(0,l.Lk)("div",ee,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(m,{data:n.vcnPageRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:s.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(r,{type:"selection",width:"35"}),(0,l.bF)(r,{fixed:"",label:"名称",width:"300"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(p,{content:e.displayName,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.displayName),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(r,{label:"状态"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(g,{type:"AVAILABLE"===e.status?"success":"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.status),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(r,{label:"子网访问"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(g,{type:!0===e.visibility?"success":"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(!0===e.visibility?"公共（区域性）":"存在私有子网"),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(r,{prop:"createTime",label:"创建时间"}),(0,l.bF)(r,{fixed:"right",label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(d,{onClick:a=>s.handleSecurityRuleList(e),type:"primary",link:""},{default:(0,l.k6)((()=>a[6]||(a[6]=[(0,l.eW)(" 安全列表 ")]))),_:2},1032,["onClick"]),(0,l.bF)(d,{onClick:a=>s.handleRemove(e),type:"danger",link:""},{default:(0,l.k6)((()=>a[7]||(a[7]=[(0,l.eW)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[f,n.loading]])]),(0,l.bF)(b,{onCurrentChange:s.handlePageChange,onSizeChange:s.handleSizeChange,"current-page":n.pageParams.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>n.pageParams.currentPage=e),"page-size":n.pageParams.pageSize,"onUpdate:pageSize":a[2]||(a[2]=e=>n.pageParams.pageSize=e),"page-sizes":[5,10,20,50],total:n.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])]))])}var le=t(640),ie={components:{SecurityRuleList:le["default"]},mounted(){this.ociCfgId=this.$route.query.cfgId,this.pageParams.ociCfgId=this.$route.query.cfgId,this.RemoveVcnParams.ociCfgId=this.$route.query.cfgId,this.username=this.$route.query.username,this.getVcnList()},data(){return{loadingInstance:null,showSecurityRuleList:!1,vcnId:null,vcnName:"",username:"",ociCfgId:"",loading:!0,pageParams:{cleanReLaunch:!1,ociCfgId:"",keyword:"",currentPage:1,pageSize:10},vcnPageRsp:[{id:"1",displayName:"123",status:"AVAILABLE",visibility:!0,createTime:"2025-03-03 22:19:18"}],total:0,batchSelected:[],RemoveVcnParams:{ociCfgId:"",vcnIds:[]}}},methods:{reloadVcnList(){this.pageParams.cleanReLaunch=!0,this.loading=!0,this.getVcnList(),this.pageParams.cleanReLaunch=!1},async getVcnList(){await this.$axios.post("/vcn/page",{...this.pageParams}).then((e=>{e.data.success?(this.vcnPageRsp=e.data.data.records,this.total=e.data.data.total):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3}),this.loading=!1})).catch((e=>{console.error("Error:",e)}))},handleRemove(e){this.batchSelected.push(e),this.batchRemove()},async batchRemove(){const e=window.confirm("确定要删除VCN吗");e?(this.loadingInstance=N.Ks.service({lock:!0,text:"正在删除 VCN，请稍候...",background:"rgba(0, 0, 0, 0.5)"}),this.RemoveVcnParams.vcnIds=this.batchSelected.map((e=>e.id)),await this.$axios.post("/vcn/remove",{...this.RemoveVcnParams}).then((e=>{e.data.success?((0,E.nk)({message:e.data.msg,type:"success",duration:2e3}),this.batchSelected=[],this.RemoveVcnParams.vcnIds=[]):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.loadingInstance.close(),this.reloadVcnList()}))):this.$message.info("已取消")},handleSecurityRuleList(e){this.vcnId=e.id,this.vcnName=e.displayName,this.showSecurityRuleList=!0},handlePageChange(e){this.pageParams.currentPage=e,this.getVcnList()},handleSizeChange(e){this.pageParams.currentPage=1,this.pageParams.pageSize=e,this.getVcnList()},handleSelectionChange(e){this.batchSelected=e}}};const ne=(0,X.A)(ie,[["render",te]]);var se=ne;const oe={class:"dashboard"},de={class:"controls"},ue={class:"main-content"},re={class:"chart-container"},ce={ref:"chartRef",style:{width:"100%",height:"400px"}};function pe(e,a,t,i,n,s){const o=(0,l.g2)("el-option"),d=(0,l.g2)("el-select"),u=(0,l.g2)("el-date-picker"),r=(0,l.g2)("el-button"),p=(0,l.g2)("el-descriptions-item"),g=(0,l.g2)("el-descriptions"),m=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.CE)("div",oe,[(0,l.Lk)("div",de,[(0,l.bF)(d,{modelValue:n.selectedRegion,"onUpdate:modelValue":a[0]||(a[0]=e=>n.selectedRegion=e),placeholder:"区域",style:{width:"180px"},onChange:s.fetchInstances},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.regionOptions,(e=>((0,l.uX)(),(0,l.Wv)(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,l.bF)(d,{modelValue:n.selectedInstance,"onUpdate:modelValue":a[1]||(a[1]=e=>n.selectedInstance=e),placeholder:"实例",style:{width:"180px"},onChange:s.fetchVnics,disabled:!n.selectedRegion},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.instanceOptions,(e=>((0,l.uX)(),(0,l.Wv)(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange","disabled"]),(0,l.bF)(d,{modelValue:n.selectedVnic,"onUpdate:modelValue":a[2]||(a[2]=e=>n.selectedVnic=e),placeholder:"vnic",style:{width:"180px"},disabled:!n.selectedInstance},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.vnicOptions,(e=>((0,l.uX)(),(0,l.Wv)(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),(0,l.bF)(d,{modelValue:n.timeInterval,"onUpdate:modelValue":a[3]||(a[3]=e=>n.timeInterval=e),placeholder:"时间间隔",style:{width:"120px"}},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.timeOptions,(e=>((0,l.uX)(),(0,l.Wv)(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,l.bF)(u,{modelValue:n.QueryParams.beginTime,"onUpdate:modelValue":a[4]||(a[4]=e=>n.QueryParams.beginTime=e),type:"datetime",placeholder:"开始时间",style:{width:"180px"}},null,8,["modelValue"]),(0,l.bF)(u,{modelValue:n.QueryParams.endTime,"onUpdate:modelValue":a[5]||(a[5]=e=>n.QueryParams.endTime=e),type:"datetime",placeholder:"结束时间",style:{width:"180px"}},null,8,["modelValue"]),(0,l.bF)(r,{type:"primary",onClick:a[6]||(a[6]=e=>s.fetchData()),loading:n.loading},{default:(0,l.k6)((()=>a[7]||(a[7]=[(0,l.eW)("查询")]))),_:1},8,["loading"])]),(0,l.Lk)("div",ue,[(0,l.bF)(m,{class:"info-panel",shadow:"hover"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{title:"配置详情",border:"",column:"1",size:"small"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{label:"当前配置"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.currentConfig),1)])),_:1}),(0,l.bF)(p,{label:"区域"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.selectedRegion),1)])),_:1}),(0,l.bF)(p,{label:"实例数量"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.instanceCount),1)])),_:1}),(0,l.bF)(p,{label:"本月入站流量总计"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.inboundTraffic),1)])),_:1}),(0,l.bF)(p,{label:"本月出站流量总计"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.outboundTraffic),1)])),_:1})])),_:1})])),_:1}),(0,l.Lk)("div",re,[(0,l.Lk)("div",ce,null,512)])])])}t(4603),t(7566),t(8721);var ge=t(9671),me={props:{ociCfgId:String,username:String},mounted(){this.currentConfig=this.username,this.updateChart(this.data),this.getCondition()},created(){const e=new Date;this.QueryParams.beginTime=new Date(e.getFullYear(),e.getMonth(),1,0,0,0),this.QueryParams.endTime=e},data(){return{loading:!0,selectedRegion:"",selectedInstance:"",selectedVnic:"",timeInterval:"",startTime:null,endTime:null,QueryParams:{ociCfgId:this.ociCfgId,beginTime:null,endTime:null,region:"",inQuery:"",outQuery:"",namespace:"oci_vcn"},regionOptions:[],instanceOptions:[{value:"instance-1",label:"实例1"},{value:"instance-1",label:"实例2"}],vnicOptions:[{value:"vnic1",label:"vnic1"},{value:"vnic2",label:"vnic2"}],timeOptions:[{value:"[1m]",label:"分钟"},{value:"[60m]",label:"小时"},{value:"[1440m]",label:"天"}],currentConfig:"首尔",instanceCount:0,inboundTraffic:"0 MB",outboundTraffic:"0 MB",data:{time:[],inbound:[],outbound:[]}}},methods:{async getCondition(){await this.$axios.post("/traffic/getCondition",new URLSearchParams({ociCfgId:this.ociCfgId})).then((e=>{if(e.data.success){const a=e.data.data;this.regionOptions=a.regionOptions,this.selectedRegion=a.regionOptions[0].value,this.instanceOptions=a.instanceOptions[this.selectedRegion]||[],this.fetchInstances()}else(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{(0,E.nk)({message:"数据获取失败:"+e,type:"error",duration:2e3})}))},async fetchData(){this.selectedInstance?this.selectedVnic?this.timeInterval?(this.loading=!0,await this.fetchInstances(),this.QueryParams.inQuery="VnicToNetworkBytes"+this.timeInterval+'{resourceId = "'+this.selectedVnic+'"}.sum()',this.QueryParams.outQuery="VnicFromNetworkBytes"+this.timeInterval+'{resourceId = "'+this.selectedVnic+'"}.sum()',this.QueryParams.region=this.selectedRegion,await this.$axios.post("/traffic/data",{...this.QueryParams}).then((e=>{e.data.success?(this.data=e.data.data,this.updateChart(this.data),(0,E.nk)({message:e.data.msg,type:"success",duration:2e3})):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{(0,E.nk)({message:"数据获取失败:"+e,type:"error",duration:2e3})})).finally((()=>{this.loading=!1}))):this.$message.warning("请选择时间间隔"):this.$message.warning("请选择vnic"):this.$message.warning("请选择实例")},async fetchInstances(){this.loading=!0,this.selectedRegion&&(await this.$axios.post("/traffic/fetchInstances",new URLSearchParams({ociCfgId:this.ociCfgId,region:this.selectedRegion})).then((e=>{if(e.data.success){const a=e.data.data;this.instanceCount=a.instanceCount,this.inboundTraffic=a.inboundTraffic,this.outboundTraffic=a.outboundTraffic}else(0,E.nk)({message:"获取区域实例失败",type:"error",duration:2e3})})).catch((e=>{(0,E.nk)({message:"获取区域实例失败:"+e,type:"error",duration:2e3})})),this.loading=!1)},async fetchVnics(){this.loading=!0,this.selectedVnic="",this.vnicOptions=[],this.selectedInstance&&(await this.$axios.post("/traffic/fetchVnics",new URLSearchParams({ociCfgId:this.ociCfgId,region:this.selectedRegion,instanceId:this.selectedInstance})).then((e=>{e.data.success?this.vnicOptions=e.data.data:(0,E.nk)({message:"获取区域实例vnic失败:",type:"error",duration:2e3})})).catch((e=>{(0,E.nk)({message:"获取区域实例vnic失败:"+e,type:"error",duration:2e3})})),this.loading=!1)},updateChart(e){const a=ge.Ts(this.$refs.chartRef),t={tooltip:{trigger:"axis"},legend:{orient:"horizontal",bottom:10,align:"auto",data:["入站流量","出站流量"]},xAxis:{type:"category",data:e.time,axisLabel:{rotate:15}},yAxis:{type:"value",axisLabel:{formatter:"{value} GB"}},series:[{name:"入站流量",type:"bar",data:e.inbound,itemStyle:{color:"#5470c6"}},{name:"出站流量",type:"bar",data:e.outbound,itemStyle:{color:"#91cc75"}}]};a.setOption(t)}}};const be=(0,X.A)(me,[["render",pe],["__scopeId","data-v-3794158f"]]);var he=be;const fe={class:"user-page"},ve={style:{"overflow-x":"auto"}},ye={style:{"text-align":"right","margin-top":"20px"}},ke={style:{"white-space":"pre-wrap"}},Ce={class:"dialog-footer"};function Ie(e,a,t,i,n,s){const o=(0,l.g2)("el-button"),d=(0,l.g2)("el-descriptions-item"),u=(0,l.g2)("el-tag"),r=(0,l.g2)("el-descriptions"),p=(0,l.g2)("el-card"),g=(0,l.g2)("el-table-column"),m=(0,l.g2)("el-tooltip"),b=(0,l.g2)("el-table"),h=(0,l.g2)("el-input"),f=(0,l.g2)("el-form-item"),v=(0,l.g2)("el-form"),y=(0,l.g2)("el-dialog"),k=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",fe,[(0,l.bF)(p,{class:"user-info-card"},{default:(0,l.k6)((()=>[a[13]||(a[13]=(0,l.Lk)("div",{class:"clearfix"},[(0,l.Lk)("span",null,"租户信息")],-1)),(0,l.bF)(r,{column:1,border:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{label:"当前配置（点击修改）"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{onClick:s.handleUpdateUsername,type:"success",link:"",style:{"margin-left":"0"}},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.username),1)])),_:1},8,["onClick"])])),_:1}),(0,l.bF)(d,{label:"租户名称"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.tenantInfo.name),1)])),_:1}),(0,l.bF)(d,{label:"homeRegionKey"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.tenantInfo.homeRegionKey),1)])),_:1}),(0,l.bF)(d,{label:"upiIdcsCompatibilityLayerEndpoint"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.tenantInfo.upiIdcsCompatibilityLayerEndpoint),1)])),_:1}),(0,l.bF)(d,{label:"租户ID"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.tenantInfo.id),1)])),_:1}),(0,l.bF)(d,{label:"描述"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(n.tenantInfo.description),1)])),_:1}),(0,l.bF)(d,{label:"已订阅的区域"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.tenantInfo.regions,(e=>((0,l.uX)(),(0,l.Wv)(u,{key:e,style:{"margin-right":"10px"}},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e),1)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,l.bF)(p,{class:"user-list-card"},{default:(0,l.k6)((()=>[a[16]||(a[16]=(0,l.Lk)("div",{class:"clearfix"},[(0,l.Lk)("span",null,"用户列表")],-1)),(0,l.Lk)("div",ve,[(0,l.bF)(b,{data:n.tenantInfo.userList,style:{width:"100%","min-width":"800px"}},{default:(0,l.k6)((()=>[(0,l.bF)(g,{type:"selection",width:"35"}),(0,l.bF)(g,{fixed:"",label:"名称"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(m,{content:e.name,placement:"top"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.name),1)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(g,{label:"邮箱"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(m,{content:e.email,placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.email),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,l.bF)(g,{label:"状态"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(u,{type:"ACTIVE"===e.lifecycleState?"success":"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.lifecycleState),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(g,{label:"邮箱验证状态"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(u,{type:e.emailVerified?"success":"danger"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.emailVerified?"已验证":"未验证"),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(g,{label:"是否绑定MFA"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(u,{type:e.isMfaActivated?"success":"info"},{default:(0,l.k6)((()=>[(0,l.eW)((0,c.v_)(e.isMfaActivated?"已绑定":"未绑定"),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(g,{prop:"timeCreated",label:"创建时间"}),(0,l.bF)(g,{prop:"lastSuccessfulLoginTime",label:"最后成功登录时间"}),(0,l.bF)(g,{fixed:"right",label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(o,{onClick:a=>s.handleEdit(e),type:"primary",link:""},{default:(0,l.k6)((()=>a[14]||(a[14]=[(0,l.eW)(" 编辑 ")]))),_:2},1032,["onClick"]),(0,l.bF)(o,{onClick:a=>s.deleteUser(e),type:"danger",link:""},{default:(0,l.k6)((()=>a[15]||(a[15]=[(0,l.eW)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1})])),[[k,n.loading]]),(0,l.bF)(y,{title:"编辑用户："+n.UpdateUserName+" （🔔注意：部分功能可能会失败）",modelValue:n.showEdit,"onUpdate:modelValue":a[6]||(a[6]=e=>n.showEdit=e),onClose:a[7]||(a[7]=e=>n.showEdit=!1)},{default:(0,l.k6)((()=>[(0,l.bF)(o,{type:"primary",onClick:a[0]||(a[0]=e=>n.jsonDialogVisible=!0)},{default:(0,l.k6)((()=>a[17]||(a[17]=[(0,l.eW)("显示用户完整 JSON 数据")]))),_:1}),(0,l.bF)(o,{type:"danger",onClick:s.deleteMfaDevice,loading:n.deleteMfaDeviceLoading},{default:(0,l.k6)((()=>a[18]||(a[18]=[(0,l.eW)("清除所有 MFA 设备")]))),_:1},8,["onClick","loading"]),(0,l.bF)(o,{type:"danger",onClick:s.deleteApiKey,loading:n.deleteApiKeyLoading},{default:(0,l.k6)((()=>a[19]||(a[19]=[(0,l.eW)("清除所有 API Key")]))),_:1},8,["onClick","loading"]),(0,l.bF)(o,{type:"warning",onClick:s.resetPassword,loading:n.resetPasswordLoading},{default:(0,l.k6)((()=>a[20]||(a[20]=[(0,l.eW)("重置密码")]))),_:1},8,["onClick","loading"]),(0,l.bF)(v,{"label-position":"top",style:{"margin-top":"20px"}},{default:(0,l.k6)((()=>[(0,l.bF)(f,{label:"邮箱"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:n.UpdateUserParams.email,"onUpdate:modelValue":a[1]||(a[1]=e=>n.UpdateUserParams.email=e),placeholder:"邮箱",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(f,{label:"dbUserName"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:n.UpdateUserParams.dbUserName,"onUpdate:modelValue":a[2]||(a[2]=e=>n.UpdateUserParams.dbUserName=e),placeholder:"dbUserName",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(f,{label:"描述"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:n.UpdateUserParams.description,"onUpdate:modelValue":a[3]||(a[3]=e=>n.UpdateUserParams.description=e),placeholder:"描述",type:"textarea",rows:"6",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Lk)("div",ye,[(0,l.bF)(o,{type:"primary",onClick:s.updateUserInfo,loading:n.updateUserInfoLoading},{default:(0,l.k6)((()=>a[21]||(a[21]=[(0,l.eW)("修改")]))),_:1},8,["onClick","loading"])]),(0,l.bF)(y,{title:"JSON 数据",modelValue:n.jsonDialogVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>n.jsonDialogVisible=e),onClose:a[5]||(a[5]=e=>n.jsonDialogVisible=!1)},{default:(0,l.k6)((()=>[(0,l.Lk)("pre",ke,(0,c.v_)(n.jsonData),1)])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"]),(0,l.bF)(y,{modelValue:n.updateCfgDialog,"onUpdate:modelValue":a[11]||(a[11]=e=>n.updateCfgDialog=e),title:"修改配置名称",width:"30%",onClose:a[12]||(a[12]=e=>n.updateCfgDialog=!1)},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",Ce,[(0,l.bF)(o,{type:"info",onClick:a[9]||(a[9]=e=>n.updateCfgDialog=!1)},{default:(0,l.k6)((()=>a[22]||(a[22]=[(0,l.eW)(" 取消 ")]))),_:1}),(0,l.bF)(o,{type:"primary",onClick:a[10]||(a[10]=e=>s.updateOciCfgName()),loading:n.updateCfgLoading},{default:(0,l.k6)((()=>a[23]||(a[23]=[(0,l.eW)(" 修改 ")]))),_:1},8,["loading"])])])),default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:n.updateCfgParams.updateCfgName,"onUpdate:modelValue":a[8]||(a[8]=e=>n.updateCfgParams.updateCfgName=e),placeholder:"请输入自定义配置名称，例：这是我的首尔",clearable:""},null,8,["modelValue"])])),_:1},8,["modelValue"])],64)}var Pe={data(){return{updateCfgParams:{cfgId:"",updateCfgName:""},updateCfgDialog:!1,updateCfgLoading:!1,loading:!0,deleteMfaDeviceLoading:!1,deleteApiKeyLoading:!1,resetPasswordLoading:!1,updateUserInfoLoading:!1,showEdit:!1,username:"",ociCfgId:"",total:0,GetTenantUserListPageParams:{ociCfgId:"",region:"",cleanReLaunch:!1},tenantInfo:{id:"xxxxxxxxxxxx",name:"yohann",description:"xxxx",homeRegionKey:"homeRegionKey",upiIdcsCompatibilityLayerEndpoint:"upiIdcsCompatibilityLayerEndpoint",regions:["tag1","tag2","tag3"],userList:[]},UpdateUserId:"",UpdateUserName:"",jsonDialogVisible:!1,jsonData:"",UpdateUserParams:{ociCfgId:"",userId:"",email:"",dbUserName:"",description:""}}},mounted(){this.ociCfgId=this.$route.query.cfgId,this.username=this.$route.query.username,this.GetTenantUserListPageParams.ociCfgId=this.ociCfgId,this.getTenantInfo()},methods:{reloadTenantInfo(){this.GetTenantUserListPageParams.cleanReLaunch=!0,this.loading=!0,this.getTenantInfo(),this.GetTenantUserListPageParams.cleanReLaunch=!1},async getTenantInfo(){this.loading=!0,this.GetTenantUserListPageParams.ociCfgId=this.ociCfgId,await this.$axios.post("/tenant/tenantInfo",{...this.GetTenantUserListPageParams}).then((e=>{e.data.success?this.tenantInfo=e.data.data:(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})),this.loading=!1},handleUpdateUsername(){this.updateCfgDialog=!0,this.updateCfgParams.cfgId=this.ociCfgId,this.updateCfgParams.updateCfgName=this.username},async updateOciCfgName(){const e=await(0,O.Z)("确定要修改配置名称吗？","修改配置名称");e?(this.updateCfgLoading=!0,await this.$axios.post("/oci/updateCfgName",{...this.updateCfgParams}).then((e=>{e.data.success?((0,E.nk)({message:"修改配置名称成功",type:"success",duration:2e3}),this.username=this.updateCfgParams.updateCfgName):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3}),this.updateCfgLoading=!1,this.updateCfgDialog=!1,this.reloadTenantInfo()})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},handleEdit(e){this.UpdateUserId=e.id,this.UpdateUserName=e.name,this.jsonData=e.jsonStr,this.UpdateUserParams.email=e.email,this.UpdateUserParams.dbUserName=e.email,this.UpdateUserParams.description=e.description,this.showEdit=!0},async deleteUser(e){const a=window.confirm("确定要删除该用户吗？（🔔注意：可能会删除失败）");a?await this.$axios.post("/tenant/deleteUser",{ociCfgId:this.ociCfgId,userId:e.id}).then((e=>{e.data.success?(0,E.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.reloadTenantInfo()})):this.$message.info("已取消")},async deleteMfaDevice(){const e=window.confirm("确定要清除所有 MFA 设备吗");e?(this.deleteMfaDeviceLoading=!0,await this.$axios.post("/tenant/deleteMfaDevice",{ociCfgId:this.ociCfgId,userId:this.UpdateUserId}).then((e=>{e.data.success?(0,E.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})),this.deleteMfaDeviceLoading=!1):this.$message.info("已取消")},async deleteApiKey(){const e=window.confirm("确定要清除所有 API Key吗");e?(this.deleteApiKeyLoading=!0,await this.$axios.post("/tenant/deleteApiKey",{ociCfgId:this.ociCfgId,userId:this.UpdateUserId}).then((e=>{e.data.success?(0,E.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})),this.deleteApiKeyLoading=!1):this.$message.info("已取消")},async resetPassword(){const e=window.confirm("确定要重置该用户的密码吗");e?(this.resetPasswordLoading=!0,await this.$axios.post("/tenant/resetPassword",{ociCfgId:this.ociCfgId,userId:this.UpdateUserId}).then((e=>{e.data.success?(0,E.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})),this.resetPasswordLoading=!1):this.$message.info("已取消")},async updateUserInfo(){const e=window.confirm("确定要更新该用户信息吗");e?(this.updateUserInfoLoading=!0,this.UpdateUserParams.ociCfgId=this.ociCfgId,this.UpdateUserParams.userId=this.UpdateUserId,await this.$axios.post("/tenant/updateUserInfo",{...this.UpdateUserParams}).then((e=>{e.data.success?(0,E.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,E.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})),this.updateUserInfoLoading=!1):this.$message.info("已取消")}}};const Ve=(0,X.A)(Pe,[["render",Ie],["__scopeId","data-v-2fcde5fe"]]);var Fe=Ve,Le={components:{OciInstanceInfo:z,BootVolumeList:H,VcnList:se,TrafficStatistics:he,OciTenant:Fe},mounted(){this.cfgId=this.$route.query.cfgId,this.username=this.$route.query.username},data(){return{activeTab:"OciTenant",cfgId:"",username:""}},methods:{handleTabClick(e){console.log(`Switched to tab: ${e.name}`)}}};const _e=(0,X.A)(Le,[["render",r]]);var Re=_e},640:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var l=t(6768),i=t(4232);const n={key:0},s={style:{"overflow-x":"auto"}};function o(e,a,t,o,d,u){const r=(0,l.g2)("el-button"),c=(0,l.g2)("el-switch"),p=(0,l.g2)("el-form-item"),g=(0,l.g2)("el-option"),m=(0,l.g2)("el-select"),b=(0,l.g2)("el-input"),h=(0,l.g2)("el-form"),f=(0,l.g2)("el-dialog"),v=(0,l.g2)("el-divider"),y=(0,l.g2)("el-table-column"),k=(0,l.g2)("el-tag"),C=(0,l.g2)("el-table"),I=(0,l.g2)("el-pagination"),P=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(r,{type:"primary",onClick:a[0]||(a[0]=e=>d.inboundDialogVisible=!0)},{default:(0,l.k6)((()=>a[28]||(a[28]=[(0,l.eW)("添加入站规则")]))),_:1}),(0,l.bF)(f,{modelValue:d.inboundDialogVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>d.inboundDialogVisible=e),title:"添加入站规则",width:"50%"},{footer:(0,l.k6)((()=>[(0,l.bF)(r,{onClick:a[10]||(a[10]=e=>d.inboundDialogVisible=!1)},{default:(0,l.k6)((()=>a[29]||(a[29]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(r,{type:"primary",onClick:u.addInboundRule,loading:d.addIngressLoading},{default:(0,l.k6)((()=>a[30]||(a[30]=[(0,l.eW)("添加入站规则")]))),_:1},8,["onClick","loading"])])),default:(0,l.k6)((()=>[(0,l.bF)(h,{"label-width":"120px"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{label:"无状态"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:d.inboundRule.isStateless,"onUpdate:modelValue":a[1]||(a[1]=e=>d.inboundRule.isStateless=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])])),_:1}),(0,l.bF)(p,{label:"源类型"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:d.inboundRule.sourceType,"onUpdate:modelValue":a[2]||(a[2]=e=>d.inboundRule.sourceType=e),placeholder:"请选择"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{label:"CIDR",value:"CIDR_BLOCK"}),(0,l.bF)(g,{label:"服务",value:"SERVICE_CIDR_BLOCK"})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(p,{label:"源 CIDR"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.inboundRule.source,"onUpdate:modelValue":a[3]||(a[3]=e=>d.inboundRule.source=e),placeholder:"请输入 CIDR，如 10.0.0.0/24"},null,8,["modelValue"])])),_:1}),(0,l.bF)(p,{label:"IP 协议"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:d.inboundRule.protocol,"onUpdate:modelValue":a[4]||(a[4]=e=>d.inboundRule.protocol=e),placeholder:"请选择"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(d.protocols,(e=>((0,l.uX)(),(0,l.Wv)(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),"1"===d.inboundRule.protocol?((0,l.uX)(),(0,l.Wv)(p,{key:0,label:"类型"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.inboundRule.icmpOptions.type,"onUpdate:modelValue":a[5]||(a[5]=e=>d.inboundRule.icmpOptions.type=e),placeholder:"全部"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),"1"===d.inboundRule.protocol?((0,l.uX)(),(0,l.Wv)(p,{key:1,label:"代码"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.inboundRule.icmpOptions.code,"onUpdate:modelValue":a[6]||(a[6]=e=>d.inboundRule.icmpOptions.code=e),placeholder:"全部"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),["6","17"].includes(d.inboundRule.protocol)?((0,l.uX)(),(0,l.Wv)(p,{key:2,label:"源端口范围"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.inboundRule.sourcePort,"onUpdate:modelValue":a[7]||(a[7]=e=>d.inboundRule.sourcePort=e),placeholder:"示例: 80、20-22"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),["6","17"].includes(d.inboundRule.protocol)?((0,l.uX)(),(0,l.Wv)(p,{key:3,label:"目标端口范围"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.inboundRule.destinationPort,"onUpdate:modelValue":a[8]||(a[8]=e=>d.inboundRule.destinationPort=e),placeholder:"示例: 80、20-22"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(p,{label:"说明"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.inboundRule.description,"onUpdate:modelValue":a[9]||(a[9]=e=>d.inboundRule.description=e),type:"textarea",maxlength:"255","show-word-limit":"",placeholder:"最多 255 个字符"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(r,{type:"primary",onClick:a[12]||(a[12]=e=>d.outboundDialogVisible=!0)},{default:(0,l.k6)((()=>a[31]||(a[31]=[(0,l.eW)("添加出站规则")]))),_:1}),(0,l.bF)(f,{modelValue:d.outboundDialogVisible,"onUpdate:modelValue":a[23]||(a[23]=e=>d.outboundDialogVisible=e),title:"添加出站规则",width:"50%"},{footer:(0,l.k6)((()=>[(0,l.bF)(r,{onClick:a[22]||(a[22]=e=>d.outboundDialogVisible=!1)},{default:(0,l.k6)((()=>a[32]||(a[32]=[(0,l.eW)("取消")]))),_:1}),(0,l.bF)(r,{type:"primary",onClick:u.addOutboundRule,loading:d.addEgressLoading},{default:(0,l.k6)((()=>a[33]||(a[33]=[(0,l.eW)("添加出站规则")]))),_:1},8,["onClick","loading"])])),default:(0,l.k6)((()=>[(0,l.bF)(h,{"label-width":"120px"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{label:"无状态"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:d.outboundRule.isStateless,"onUpdate:modelValue":a[13]||(a[13]=e=>d.outboundRule.isStateless=e),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])])),_:1}),(0,l.bF)(p,{label:"目的地类型"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:d.outboundRule.destinationType,"onUpdate:modelValue":a[14]||(a[14]=e=>d.outboundRule.destinationType=e),placeholder:"请选择"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{label:"CIDR",value:"CIDR_BLOCK"}),(0,l.bF)(g,{label:"服务",value:"SERVICE_CIDR_BLOCK"})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(p,{label:"目的地 CIDR"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.outboundRule.destination,"onUpdate:modelValue":a[15]||(a[15]=e=>d.outboundRule.destination=e),placeholder:"请输入 CIDR，如 10.0.0.0/24"},null,8,["modelValue"])])),_:1}),(0,l.bF)(p,{label:"IP 协议"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{modelValue:d.outboundRule.protocol,"onUpdate:modelValue":a[16]||(a[16]=e=>d.outboundRule.protocol=e),placeholder:"请选择"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(d.protocols,(e=>((0,l.uX)(),(0,l.Wv)(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),"1"===d.outboundRule.protocol?((0,l.uX)(),(0,l.Wv)(p,{key:0,label:"类型"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.outboundRule.icmpOptions.type,"onUpdate:modelValue":a[17]||(a[17]=e=>d.outboundRule.icmpOptions.type=e),placeholder:"全部"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),"1"===d.outboundRule.protocol?((0,l.uX)(),(0,l.Wv)(p,{key:1,label:"代码"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.outboundRule.icmpOptions.code,"onUpdate:modelValue":a[18]||(a[18]=e=>d.outboundRule.icmpOptions.code=e),placeholder:"全部"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),["6","17"].includes(d.outboundRule.protocol)?((0,l.uX)(),(0,l.Wv)(p,{key:2,label:"源端口范围"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.outboundRule.sourcePort,"onUpdate:modelValue":a[19]||(a[19]=e=>d.outboundRule.sourcePort=e),placeholder:"示例: 80、20-22"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),["6","17"].includes(d.outboundRule.protocol)?((0,l.uX)(),(0,l.Wv)(p,{key:3,label:"目标端口范围"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.outboundRule.destinationPort,"onUpdate:modelValue":a[20]||(a[20]=e=>d.outboundRule.destinationPort=e),placeholder:"示例: 80、20-22"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(p,{label:"说明"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{modelValue:d.outboundRule.description,"onUpdate:modelValue":a[21]||(a[21]=e=>d.outboundRule.description=e),type:"textarea",maxlength:"255","show-word-limit":"",placeholder:"最多 255 个字符"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(v,{class:"divider"}),e.showSecurityRuleList?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(r,{type:"success",style:{"margin-bottom":"20px"},onClick:u.reloadSecurityRuleList},{default:(0,l.k6)((()=>a[34]||(a[34]=[(0,l.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,l.bF)(b,{modelValue:d.GetSecurityRuleListPageParams.keyword,"onUpdate:modelValue":a[24]||(a[24]=e=>d.GetSecurityRuleListPageParams.keyword=e),placeholder:"模糊搜索",onInput:u.getSecurityRuleList,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"200px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,l.bF)(m,{modelValue:d.GetSecurityRuleListPageParams.type,"onUpdate:modelValue":a[25]||(a[25]=e=>d.GetSecurityRuleListPageParams.type=e),onChange:u.getSecurityRuleList,placeholder:"开机任务状态筛选",style:{"margin-left":"20px",width:"180px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>[(0,l.bF)(g,{label:"入站规则",value:0}),(0,l.bF)(g,{label:"出站规则",value:1})])),_:1},8,["modelValue","onChange"]),(0,l.bF)(r,{type:"danger",onClick:u.batchRemove,disabled:!d.batchSelected.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,l.k6)((()=>a[35]||(a[35]=[(0,l.eW)(" 批量删除 ")]))),_:1},8,["onClick","disabled"]),(0,l.Lk)("div",s,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(C,{data:d.ruleList,style:{width:"100%","min-width":"800px"},onSelectionChange:u.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(y,{type:"selection",width:"35"}),(0,l.bF)(y,{fixed:"",prop:"isStateless",label:"无状态"}),(0,l.bF)(y,{label:"源"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(k,{type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.sourceOrDestination),1)])),_:2},1024)])),_:1}),(0,l.bF)(y,{prop:"protocol",label:"协议"}),(0,l.bF)(y,{prop:"sourcePort",label:"源端口范围"}),(0,l.bF)(y,{prop:"destinationPort",label:"目的地端口范围"}),(0,l.bF)(y,{prop:"typeAndCode",label:"类型和代码"}),(0,l.bF)(y,{prop:"description",label:"说明"}),(0,l.bF)(y,{fixed:"right",label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(r,{onClick:a=>u.handleRemove(e),type:"danger",link:""},{default:(0,l.k6)((()=>a[36]||(a[36]=[(0,l.eW)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[P,d.loading]])]),(0,l.bF)(I,{onCurrentChange:u.handlePageChange,onSizeChange:u.handleSizeChange,"current-page":d.GetSecurityRuleListPageParams.currentPage,"onUpdate:currentPage":a[26]||(a[26]=e=>d.GetSecurityRuleListPageParams.currentPage=e),"page-size":d.GetSecurityRuleListPageParams.pageSize,"onUpdate:pageSize":a[27]||(a[27]=e=>d.GetSecurityRuleListPageParams.pageSize=e),"page-sizes":[5,10,20,50],total:d.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])]))],64)}t(4114),t(1454);var d=t(1219),u={props:{ociCfgId:String,username:String,vcnId:String,vcnName:String},mounted(){this.getSecurityRuleList()},data(){return{total:0,batchSelected:[],loading:!0,addIngressLoading:!1,addEgressLoading:!1,inboundDialogVisible:!1,outboundDialogVisible:!1,inboundRule:{isStateless:!1,sourceType:"",source:"",protocol:"",icmpOptions:{code:"",type:""},sourcePort:"",destinationPort:"",description:""},outboundRule:{isStateless:!1,destinationType:"",destination:"",protocol:"",icmpOptions:{code:"",type:""},sourcePort:"",destinationPort:"",description:""},ruleList:[{id:"",isStateless:!1,protocol:"",sourceOrDestination:"",sourcePort:"",destinationPort:"",typeAndCode:"",description:""}],GetSecurityRuleListPageParams:{keyword:"",currentPage:1,pageSize:10,cleanReLaunch:!1,ociCfgId:"",vcnId:"",type:0},RemoveSecurityRuleParams:{ociCfgId:"",vcnId:"",type:0,ruleIds:[]},protocols:[{label:"所有协议",value:"all"},{label:"ICMP",value:"1"},{label:"TCP",value:"6"},{label:"UDP",value:"17"},{label:"3PC",value:"34"},{label:"A/N",value:"107"},{label:"AH",value:"51"},{label:"ARGUS",value:"13"},{label:"ARIS",value:"104"},{label:"AX.25",value:"93"},{label:"任意 0 跃点协议",value:"114"},{label:"任何分布式文件系统",value:"68"},{label:"任何主机内部协议",value:"61"},{label:"任何本地网络",value:"63"},{label:"任何专用加密方案",value:"99"},{label:"BBN-RCC-MON",value:"10"},{label:"BNA",value:"49"},{label:"BR-SAT-MON",value:"76"},{label:"CBT",value:"7"},{label:"CFTP",value:"62"},{label:"CHAOS",value:"16"},{label:"CPHB",value:"73"},{label:"CPNX",value:"72"},{label:"CRTP",value:"126"},{label:"CRUDP",value:"127"},{label:"Compaq-Peer",value:"110"},{label:"DCCP",value:"33"},{label:"DCN-MEAS",value:"19"},{label:"DDP",value:"37"},{label:"DDX",value:"116"},{label:"DGP",value:"86"},{label:"EGP",value:"8"},{label:"EIGRP",value:"88"},{label:"EMCON",value:"14"},{label:"ENCAP",value:"98"},{label:"ESP",value:"50"},{label:"ETHERIP",value:"97"},{label:"FC",value:"133"},{label:"FIRE",value:"125"},{label:"GGP",value:"3"},{label:"GMTP",value:"100"},{label:"GRE",value:"47"},{label:"HIP",value:"139"},{label:"HMP",value:"20"},{label:"HOPOPT",value:"0"},{label:"I-NLSP",value:"52"},{label:"IATP",value:"117"},{label:"IDPR",value:"35"},{label:"IDPR-CMTP",value:"38"},{label:"IDRP",value:"45"},{label:"IFMP",value:"101"},{label:"IGMP",value:"2"},{label:"IGP",value:"9"},{label:"IL",value:"40"},{label:"IP-in-IP",value:"4"},{label:"IPCU",value:"71"},{label:"IPComp",value:"108"},{label:"IPIP",value:"94"},{label:"IPLT",value:"129"},{label:"IPPC",value:"67"},{label:"IPX-in-IP",value:"111"},{label:"IPv6",value:"41"},{label:"IPv6-Frag",value:"44"},{label:"IPv6-ICMP",value:"58"},{label:"IPv6-NoNxt",value:"59"},{label:"IPv6-Opts",value:"60"},{label:"IPv6-Route",value:"43"},{label:"IRTP",value:"28"},{label:"IS-IS",value:"124"},{label:"ISO-IP",value:"80"},{label:"ISO-TP4",value:"29"},{label:"KRYPTOLAN",value:"65"},{label:"L2TP",value:"115"},{label:"LARP",value:"91"},{label:"LEAF-1",value:"25"},{label:"LEAF-2",value:"26"},{label:"Manet",value:"138"},{label:"MERIT-INP",value:"32"},{label:"MFE-NSP",value:"31"},{label:"MHRP",value:"48"},{label:"MICP",value:"95"},{label:"MOBILE",value:"55"},{label:"MPLS-in-IP",value:"137"},{label:"MTP",value:"92"},{label:"MUX",value:"18"},{label:"Mobility",value:"135"},{label:"NARP",value:"54"},{label:"NETBLT",value:"30"},{label:"NSFNET-IGP",value:"85"},{label:"NVP-II",value:"11"},{label:"OSPF",value:"89"},{label:"PGM",value:"113"},{label:"PIM",value:"103"},{label:"PIPE",value:"131"},{label:"PNNI",value:"102"},{label:"PRM",value:"21"},{label:"PTP",value:"123"},{label:"PUP",value:"12"},{label:"PVP",value:"75"},{label:"QNX",value:"106"},{label:"可靠的数据协议",value:"27"},{label:"ROHC",value:"142"},{label:"RSVP",value:"46"},{label:"RSVP-E2E-IGNORE",value:"134"},{label:"RVD",value:"66"},{label:"SAT-EXPAK",value:"64"},{label:"SAT-MON",value:"69"},{label:"SCC-SP",value:"96"},{label:"SCPS",value:"105"},{label:"SCTP",value:"132"},{label:"SDRP",value:"42"},{label:"SECURE-VMTP",value:"82"},{label:"SKIP",value:"57"},{label:"SM",value:"122"},{label:"SMP",value:"121"},{label:"SNP",value:"109"},{label:"SPS",value:"130"},{label:"SRP",value:"119"},{label:"SSCOPMCE",value:"128"},{label:"ST",value:"5"},{label:"STP",value:"118"},{label:"SUN-ND",value:"77"},{label:"SWIPE",value:"53"},{label:"Shim6",value:"140"},{label:"Sprite-RPC",value:"90"},{label:"TCF",value:"87"},{label:"TLSP",value:"56"},{label:"TP++",value:"39"},{label:"TRUNK-1",value:"23"},{label:"TRUNK-2",value:"24"},{label:"TTP/IPTM",value:"84"},{label:"UDPLite",value:"136"}]}},methods:{async reloadSecurityRuleList(){this.GetSecurityRuleListPageParams.cleanReLaunch=!0,this.loading=!0,this.getSecurityRuleList(),this.GetSecurityRuleListPageParams.cleanReLaunch=!1},async getSecurityRuleList(){this.loading=!0,this.GetSecurityRuleListPageParams.ociCfgId=this.ociCfgId,this.GetSecurityRuleListPageParams.vcnId=this.vcnId,await this.$axios.post("/securityRule/page",{...this.GetSecurityRuleListPageParams}).then((e=>{e.data.success?(this.ruleList=e.data.data.records,this.total=e.data.data.total):(0,d.nk)({message:e.data.msg,type:"error",duration:2e3}),this.loading=!1})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.batchSelected=[]}))},handleRemove(e){this.batchSelected.push(e),this.batchRemove()},async batchRemove(){const e=window.confirm("确定要删除安全规则吗");e?(this.loading=!0,this.RemoveSecurityRuleParams.ociCfgId=this.ociCfgId,this.RemoveSecurityRuleParams.vcnId=this.vcnId,this.RemoveSecurityRuleParams.type=this.GetSecurityRuleListPageParams.type,this.RemoveSecurityRuleParams.ruleIds=this.batchSelected.map((e=>e.id)),await this.$axios.post("/securityRule/remove",{...this.RemoveSecurityRuleParams}).then((e=>{e.data.success?((0,d.nk)({message:"删除规则成功",type:"success",duration:2e3}),this.reloadSecurityRuleList(),this.batchSelected=[],this.RemoveSecurityRuleParams.ruleIds=[]):(0,d.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))):this.$message.info("已取消")},async addInboundRule(){this.addIngressLoading=!0,await this.$axios.post("/securityRule/addIngress",{ociCfgId:this.ociCfgId,vcnId:this.vcnId,inboundRule:this.inboundRule}).then((e=>{e.data.success?((0,d.nk)({message:"添加入站规则成功",type:"success",duration:2e3}),this.inboundDialogVisible=!1,this.reloadSecurityRuleList()):(0,d.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.addIngressLoading=!1}))},async addOutboundRule(){this.addEgressLoading=!0,await this.$axios.post("/securityRule/addEgress",{ociCfgId:this.ociCfgId,vcnId:this.vcnId,outboundRule:this.outboundRule}).then((e=>{e.data.success?((0,d.nk)({message:"添加出站规则成功",type:"success",duration:2e3}),this.outboundDialogVisible=!1,this.reloadSecurityRuleList()):(0,d.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.addEgressLoading=!1}))},handlePageChange(e){this.GetSecurityRuleListPageParams.currentPage=e,this.getSecurityRuleList()},handleSizeChange(e){this.GetSecurityRuleListPageParams.currentPage=1,this.GetSecurityRuleListPageParams.pageSize=e,this.getSecurityRuleList()},handleSelectionChange(e){this.batchSelected=e}}},r=t(1241);const c=(0,r.A)(u,[["render",o]]);var p=c}}]);
//# sourceMappingURL=443.b7b2f37f.js.map