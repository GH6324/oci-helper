"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[115],{4115:function(e,a,t){t.r(a),t.d(a,{default:function(){return f}});var o=t(6768),s=t(4232);const n={class:"instance-config-container"},i={class:"toolbar"},c={class:"title"},l={class:"dialog-options"};function d(e,a,t,d,r,u){const m=(0,o.g2)("el-button"),g=(0,o.g2)("el-text"),p=(0,o.g2)("el-divider"),f=(0,o.g2)("el-input"),k=(0,o.g2)("el-col"),h=(0,o.g2)("el-row"),b=(0,o.g2)("el-card"),y=(0,o.g2)("el-input-number"),C=(0,o.g2)("el-checkbox"),I=(0,o.g2)("el-tooltip"),V=(0,o.g2)("el-slider"),F=(0,o.g2)("el-dialog"),_=(0,o.gN)("loading");return(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",i,[(0,o.bF)(m,{onClick:u.goBack},{default:(0,o.k6)((()=>a[21]||(a[21]=[(0,o.eW)("返回配置详情")]))),_:1},8,["onClick"]),(0,o.bF)(m,{onClick:u.getInstanceCfgInfo,loading:r.flushLoading},{default:(0,o.k6)((()=>a[22]||(a[22]=[(0,o.eW)("刷新页面")]))),_:1},8,["onClick","loading"]),(0,o.Lk)("span",c,[(0,o.bF)(g,{type:"primary"},{default:(0,o.k6)((()=>[(0,o.eW)("配置："+(0,s.v_)(this.username)+" —— 编辑实例配置",1)])),_:1})])]),(0,o.bF)(p,{class:"divider"}),(0,o.bF)(h,{gutter:20,type:"flex",align:"stretch"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{span:12},{default:(0,o.k6)((()=>[(0,o.bF)(b,{class:"config-card"},{default:(0,o.k6)((()=>[a[24]||(a[24]=(0,o.Lk)("div",{class:"card-title"},"修改实例名称",-1)),(0,o.bF)(h,{gutter:20,style:{"margin-top":"10px"}},{default:(0,o.k6)((()=>[(0,o.bF)(k,{span:16},{default:(0,o.k6)((()=>[(0,o.bF)(f,{modelValue:r.instanceCfg.instanceName,"onUpdate:modelValue":a[0]||(a[0]=e=>r.instanceCfg.instanceName=e),clearable:"",placeholder:"请输入实例名称"},null,8,["modelValue"])])),_:1}),(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(m,{type:"primary",onClick:a[1]||(a[1]=e=>u.modifyInstanceName()),loading:r.nameLoading,block:""},{default:(0,o.k6)((()=>a[23]||(a[23]=[(0,o.eW)("修改实例名称")]))),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),(0,o.bF)(b,{class:"config-card"},{default:(0,o.k6)((()=>[a[28]||(a[28]=(0,o.Lk)("div",{class:"card-title"},"修改CPU和内存",-1)),(0,o.bF)(h,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,o.k6)((()=>[(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(y,{modelValue:r.instanceCfg.ocpus,"onUpdate:modelValue":a[2]||(a[2]=e=>r.instanceCfg.ocpus=e),min:1},null,8,["modelValue"]),a[25]||(a[25]=(0,o.eW)(" 核 "))])),_:1}),(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(y,{modelValue:r.instanceCfg.memory,"onUpdate:modelValue":a[3]||(a[3]=e=>r.instanceCfg.memory=e),min:1},null,8,["modelValue"]),a[26]||(a[26]=(0,o.eW)(" GB "))])),_:1}),(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(m,{type:"primary",onClick:a[4]||(a[4]=e=>u.modifyCpuAndMemory()),loading:r.cpuLoading,block:""},{default:(0,o.k6)((()=>a[27]||(a[27]=[(0,o.eW)("修改CPU和内存")]))),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),(0,o.bF)(b,{class:"config-card"},{default:(0,o.k6)((()=>[a[31]||(a[31]=(0,o.Lk)("div",{class:"card-title"},"自动救援/缩小硬盘（默认47GB）",-1)),(0,o.bF)(h,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,o.k6)((()=>[(0,o.bF)(k,{span:16},{default:(0,o.k6)((()=>[(0,o.bF)(I,{content:"不占用引导卷额度，用于救援失败后恢复",placement:"bottom"},{default:(0,o.k6)((()=>[(0,o.bF)(C,{modelValue:r.keepBackupVolume,"onUpdate:modelValue":a[5]||(a[5]=e=>r.keepBackupVolume=e)},{default:(0,o.k6)((()=>a[29]||(a[29]=[(0,o.eW)("保留原引导卷的备份卷")]))),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(m,{type:"primary",onClick:a[6]||(a[6]=e=>u.autoRescue()),block:""},{default:(0,o.k6)((()=>a[30]||(a[30]=[(0,o.eW)("开始救援/缩小硬盘")]))),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(b,{class:"config-card"},{default:(0,o.k6)((()=>[a[33]||(a[33]=(0,o.Lk)("div",{class:"card-title"},"修改实例Shape",-1)),(0,o.bF)(h,{gutter:20,style:{"margin-top":"10px"}},{default:(0,o.k6)((()=>[(0,o.bF)(k,{span:16},{default:(0,o.k6)((()=>[(0,o.bF)(f,{modelValue:r.instanceCfg.shape,"onUpdate:modelValue":a[7]||(a[7]=e=>r.instanceCfg.shape=e),clearable:"",placeholder:"请输入实例Shape，例：VM.Standard.A1.Flex"},null,8,["modelValue"])])),_:1}),(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(m,{type:"primary",onClick:a[8]||(a[8]=e=>u.modifyInstanceShape()),block:""},{default:(0,o.k6)((()=>a[32]||(a[32]=[(0,o.eW)(" 修改实例Shape ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(k,{span:12},{default:(0,o.k6)((()=>[(0,o.bF)(b,{class:"config-card"},{default:(0,o.k6)((()=>[a[36]||(a[36]=(0,o.Lk)("div",{class:"card-title"},"修改引导卷大小及VPU",-1)),(0,o.bF)(h,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,o.k6)((()=>[(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(y,{modelValue:r.instanceCfg.bootVolumeSize,"onUpdate:modelValue":a[9]||(a[9]=e=>r.instanceCfg.bootVolumeSize=e),min:50},null,8,["modelValue"]),a[34]||(a[34]=(0,o.eW)(" GB "))])),_:1}),(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(V,{modelValue:r.instanceCfg.bootVolumeVpu,"onUpdate:modelValue":a[10]||(a[10]=e=>r.instanceCfg.bootVolumeVpu=e),min:10,max:120,step:10,"show-tooltip":""},null,8,["modelValue"]),(0,o.Lk)("span",null,"VPU: "+(0,s.v_)(r.instanceCfg.bootVolumeVpu),1)])),_:1}),(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(m,{type:"primary",onClick:a[11]||(a[11]=e=>u.modifyBootVolume()),loading:r.bootVolumeLoading,block:""},{default:(0,o.k6)((()=>a[35]||(a[35]=[(0,o.eW)("修改引导卷")]))),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),(0,o.bF)(b,{class:"config-card"},{default:(0,o.k6)((()=>[a[38]||(a[38]=(0,o.Lk)("div",{class:"card-title"},"实例IPV6地址",-1)),(0,o.bF)(h,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,o.k6)((()=>[(0,o.bF)(k,{span:16},{default:(0,o.k6)((()=>[(0,o.bF)(f,{modelValue:r.instanceCfg.ipv6,"onUpdate:modelValue":a[12]||(a[12]=e=>r.instanceCfg.ipv6=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,o.bF)(k,{span:8},{default:(0,o.k6)((()=>[(0,o.bF)(m,{type:"primary",onClick:a[13]||(a[13]=e=>u.createIpv6()),disabled:!!r.instanceCfg.ipv6,loading:r.ipv6Loading,block:""},{default:(0,o.k6)((()=>a[37]||(a[37]=[(0,o.eW)("附加IPV6")]))),_:1},8,["disabled","loading"])])),_:1})])),_:1})])),_:1}),(0,o.bF)(b,{class:"config-card"},{default:(0,o.k6)((()=>[a[42]||(a[42]=(0,o.Lk)("div",{class:"card-title"},"一键开启/关闭下行500Mbps",-1)),(0,o.bF)(h,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,o.k6)((()=>[(0,o.bF)(k,{span:12},{default:(0,o.k6)((()=>[a[39]||(a[39]=(0,o.eW)(" SSH端口： ")),(0,o.bF)(y,{modelValue:r.oneClick500mParams.sshPort,"onUpdate:modelValue":a[14]||(a[14]=e=>r.oneClick500mParams.sshPort=e)},null,8,["modelValue"])])),_:1}),(0,o.bF)(k,{span:12},{default:(0,o.k6)((()=>[(0,o.bF)(m,{type:"primary",onClick:a[15]||(a[15]=e=>this.oneClick500M()),block:""},{default:(0,o.k6)((()=>a[40]||(a[40]=[(0,o.eW)(" 一键开启500Mbps ")]))),_:1}),(0,o.bF)(m,{type:"danger",onClick:a[16]||(a[16]=e=>r.close500MDialog=!0),block:""},{default:(0,o.k6)((()=>a[41]||(a[41]=[(0,o.eW)(" 关闭500Mbps ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(F,{title:"提示",modelValue:r.close500MDialog,"onUpdate:modelValue":a[20]||(a[20]=e=>r.close500MDialog=e),width:"400px"},{footer:(0,o.k6)((()=>[(0,o.bF)(m,{onClick:a[19]||(a[19]=e=>r.close500MDialog=!1)},{default:(0,o.k6)((()=>a[45]||(a[45]=[(0,o.eW)("取消")]))),_:1}),(0,o.bF)(m,{type:"primary",onClick:u.onClickClose500M},{default:(0,o.k6)((()=>a[46]||(a[46]=[(0,o.eW)("确定")]))),_:1},8,["onClick"])])),default:(0,o.k6)((()=>[a[47]||(a[47]=(0,o.Lk)("div",{class:"dialog-text"},"确定要关闭下行500Mbps吗？",-1)),(0,o.Lk)("div",l,[(0,o.bF)(C,{modelValue:r.close500mParams.retainBl,"onUpdate:modelValue":a[17]||(a[17]=e=>r.close500mParams.retainBl=e)},{default:(0,o.k6)((()=>a[43]||(a[43]=[(0,o.eW)("保留网络负载平衡器")]))),_:1},8,["modelValue"]),(0,o.bF)(C,{modelValue:r.close500mParams.retainNatGw,"onUpdate:modelValue":a[18]||(a[18]=e=>r.close500mParams.retainNatGw=e)},{default:(0,o.k6)((()=>a[44]||(a[44]=[(0,o.eW)("保留NAT网关")]))),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])])),[[_,r.flushLoading]])}t(4114);var r=t(1219),u=t(2933),m={data(){return{username:"",instanceId:"",ociCfgId:"",instanceCfg:{instanceName:"",ipv6:"",ocpus:1,memory:1,bootVolumeSize:50,bootVolumeVpu:10,shape:""},oneClick500mParams:{ociCfgId:"",instanceId:"",sshPort:22},close500mParams:{ociCfgId:"",instanceId:"",retainBl:!0,retainNatGw:!0},flushLoading:!1,nameLoading:!1,cpuLoading:!1,bootVolumeLoading:!1,ipv6Loading:!1,keepBackupVolume:!1,close500MDialog:!1}},mounted(){this.username=this.$route.query.username,this.instanceId=this.$route.query.ocId,this.ociCfgId=this.$route.query.ociCfgId,this.oneClick500mParams.ociCfgId=this.$route.query.ociCfgId,this.oneClick500mParams.instanceId=this.$route.query.ocId,this.getInstanceCfgInfo()},methods:{goBack(){this.$router.back()},async getInstanceCfgInfo(){this.flushLoading=!0,await this.$axios.post("/oci/getInstanceCfgInfo",{ociCfgId:this.ociCfgId,instanceId:this.instanceId}).then((e=>{e.data.success?(this.instanceCfg=e.data.data,(0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),this.flushLoading=!1):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async oneClick500M(){try{let e="确定要一键开启下行500Mbps吗？⚠️仅试用期账号或升级号（付费）才可以开启，且只能有一台免费AMD实例开启";const a=await u.s.confirm(e,"一键开启下行500Mbps操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===a&&this.$axios.post("/oci/oneClick500M",{...this.oneClick500mParams}).then((e=>{e.data.success?((0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),this.$router.push("/dashboard/ociLog")):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))}catch(e){(0,r.nk)({message:"操作已取消",type:"info",duration:2e3}),console.error("cancelError:",e)}},async onClickClose500M(){this.flushLoading=!0;try{this.close500mParams.ociCfgId=this.ociCfgId,this.close500mParams.instanceId=this.instanceId,await this.$axios.post("/oci/oneClickClose500M",{...this.close500mParams}).then((e=>{e.data.success?((0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),this.$router.push("/dashboard/ociLog")):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))}catch(e){(0,r.nk)({message:"操作已取消",type:"info",duration:2e3}),console.error("cancelError:",e)}finally{this.flushLoading=!1,this.close500MDialog=!1}},async autoRescue(){try{let e="确定要开始救援/缩小硬盘吗？ ⚠️ 请确保删除掉原引导卷后，至少还剩余50GB引导卷额度！自动救援不一定百分百成功，如果中途失败，自行登录 Oracle Cloud 官方面板，将备份卷恢复成引导卷并附加回原实例。";this.keepBackupVolume&&(e+="🔔 当前选择了保留原引导卷的备份卷，救援结束后需要自行删除备份卷，否则会永久保留，且占用备份卷额度。");const a=await u.s.confirm(e,"自动救援/缩小硬盘操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===a&&this.$axios.post("/oci/autoRescue",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,name:this.instanceCfg.instanceName,keepBackupVolume:this.keepBackupVolume}).then((e=>{e.data.success?((0,r.nk)({message:"自动救援/缩小硬盘任务已下发，具体流程请查看日志",type:"success",duration:2e3}),this.$router.push("/dashboard/ociLog")):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))}catch(e){(0,r.nk)({message:"操作已取消",type:"info",duration:2e3})}},async modifyInstanceName(){try{const e=await u.s.confirm("确定要修改实例名称吗？","修改实例名称操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.nameLoading=!0,await this.$axios.post("/oci/updateInstanceName",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,name:this.instanceCfg.instanceName}).then((e=>{e.data.success?((0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),this.nameLoading=!1):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})))}catch(e){(0,r.nk)({message:"操作已取消",type:"info",duration:2e3})}},async modifyInstanceShape(){try{const e=await u.s.confirm("确定要修改实例Shape吗？","修改实例Shape操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.flushLoading=!0,await this.$axios.post("/oci/updateInstanceShape",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,shape:this.instanceCfg.shape}).then((e=>{e.data.success?((0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),this.getInstanceCfgInfo()):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})))}catch(e){(0,r.nk)({message:"操作已取消",type:"info",duration:2e3})}finally{this.flushLoading=!1}},async modifyCpuAndMemory(){try{const e=await u.s.confirm("修改实例CPU和内存会重启实例，确定要修改吗？","修改实例CPU和内存操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.cpuLoading=!0,await this.$axios.post("/oci/updateInstanceCfg",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,ocpus:this.instanceCfg.ocpus,memory:this.instanceCfg.memory}).then((e=>{e.data.success?((0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cpuLoading=!1):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})))}catch(e){(0,r.nk)({message:"操作已取消",type:"info",duration:2e3})}},async modifyBootVolume(){try{const e=await u.s.confirm("确定要修改实例引导卷吗？","修改实例引导卷操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.bootVolumeLoading=!0,await this.$axios.post("/oci/updateBootVolumeCfg",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,bootVolumeSize:this.instanceCfg.bootVolumeSize,bootVolumeVpu:this.instanceCfg.bootVolumeVpu}).then((e=>{e.data.success?((0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),this.bootVolumeLoading=!1):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})))}catch(e){(0,r.nk)({message:"操作已取消",type:"info",duration:2e3})}},async createIpv6(){try{const e=await u.s.confirm("确定要为实例附加 IPV6 吗？","附加 IPV6 操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.ipv6Loading=!0,await this.$axios.post("/oci/createIpv6",{ociCfgId:this.ociCfgId,instanceId:this.instanceId}).then((e=>{e.data.success?((0,r.nk)({message:e.data.msg,type:"success",duration:2e3}),this.ipv6Loading=!1):(0,r.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.getInstanceCfgInfo()})))}catch(e){(0,r.nk)({message:"操作已取消",type:"info",duration:2e3})}}}},g=t(1241);const p=(0,g.A)(m,[["render",d],["__scopeId","data-v-6e7984ea"]]);var f=p}}]);
//# sourceMappingURL=115.5d1ce9f1.js.map