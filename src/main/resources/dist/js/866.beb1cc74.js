"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[866],{8866:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});var n=t(6768),o=t(4232);const i={style:{"margin-left":"20px"}},s={class:"instance-config-container"};function c(e,a,t,c,l,d){const u=(0,n.g2)("el-button"),r=(0,n.g2)("el-text"),m=(0,n.g2)("el-divider"),g=(0,n.g2)("el-input"),p=(0,n.g2)("el-col"),f=(0,n.g2)("el-row"),k=(0,n.g2)("el-card"),h=(0,n.g2)("el-input-number"),b=(0,n.g2)("el-slider"),y=(0,n.g2)("el-checkbox");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(u,{onClick:d.goBack},{default:(0,n.k6)((()=>a[12]||(a[12]=[(0,n.eW)("返回配置详情")]))),_:1},8,["onClick"]),(0,n.bF)(u,{onClick:d.getInstanceCfgInfo,loading:l.flushLoading},{default:(0,n.k6)((()=>a[13]||(a[13]=[(0,n.eW)("刷新页面")]))),_:1},8,["onClick","loading"]),(0,n.Lk)("span",i,[(0,n.bF)(r,{type:"primary"},{default:(0,n.k6)((()=>[(0,n.eW)("配置："+(0,o.v_)(this.username)+" —— 编辑实例配置",1)])),_:1})]),(0,n.bF)(m,{class:"divider"}),(0,n.Lk)("div",s,[(0,n.bF)(k,{class:"config-card"},{default:(0,n.k6)((()=>[a[15]||(a[15]=(0,n.Lk)("div",null,"修改实例名称",-1)),(0,n.bF)(f,{gutter:20,style:{"margin-top":"10px"}},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:16},{default:(0,n.k6)((()=>[(0,n.bF)(g,{modelValue:l.instanceCfg.instanceName,"onUpdate:modelValue":a[0]||(a[0]=e=>l.instanceCfg.instanceName=e),clearable:"",placeholder:"请输入实例名称"},null,8,["modelValue"])])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"primary",onClick:a[1]||(a[1]=e=>d.modifyInstanceName()),loading:l.nameLoading,block:""},{default:(0,n.k6)((()=>a[14]||(a[14]=[(0,n.eW)("修改实例名称")]))),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(k,{class:"config-card"},{default:(0,n.k6)((()=>[a[19]||(a[19]=(0,n.Lk)("div",null,"修改CPU和内存",-1)),(0,n.bF)(f,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(h,{modelValue:l.instanceCfg.ocpus,"onUpdate:modelValue":a[2]||(a[2]=e=>l.instanceCfg.ocpus=e),min:1,label:"CPU大小"},null,8,["modelValue"]),a[16]||(a[16]=(0,n.eW)(" 核 "))])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(h,{modelValue:l.instanceCfg.memory,"onUpdate:modelValue":a[3]||(a[3]=e=>l.instanceCfg.memory=e),min:1,label:"内存大小"},null,8,["modelValue"]),a[17]||(a[17]=(0,n.eW)(" GB "))])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"primary",onClick:a[4]||(a[4]=e=>d.modifyCpuAndMemory()),loading:l.cpuLoading,block:""},{default:(0,n.k6)((()=>a[18]||(a[18]=[(0,n.eW)("修改CPU和内存")]))),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(k,{class:"config-card"},{default:(0,n.k6)((()=>[a[22]||(a[22]=(0,n.Lk)("div",null,"修改引导卷大小及VPU",-1)),(0,n.bF)(f,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(h,{modelValue:l.instanceCfg.bootVolumeSize,"onUpdate:modelValue":a[5]||(a[5]=e=>l.instanceCfg.bootVolumeSize=e),min:50,label:"引导卷大小"},null,8,["modelValue"]),a[20]||(a[20]=(0,n.eW)(" GB "))])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(b,{modelValue:l.instanceCfg.bootVolumeVpu,"onUpdate:modelValue":a[6]||(a[6]=e=>l.instanceCfg.bootVolumeVpu=e),min:10,max:120,step:10,label:"引导卷VPU大小","show-tooltip":""},null,8,["modelValue"]),(0,n.Lk)("span",null,"VPU: "+(0,o.v_)(l.instanceCfg.bootVolumeVpu),1)])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"primary",onClick:a[7]||(a[7]=e=>d.modifyBootVolume()),loading:l.bootVolumeLoading,block:""},{default:(0,n.k6)((()=>a[21]||(a[21]=[(0,n.eW)("修改引导卷 ")]))),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(k,{class:"config-card"},{default:(0,n.k6)((()=>[a[24]||(a[24]=(0,n.Lk)("div",null,"实例IPV6地址",-1)),(0,n.bF)(f,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:16},{default:(0,n.k6)((()=>[(0,n.bF)(g,{modelValue:l.instanceCfg.ipv6,"onUpdate:modelValue":a[8]||(a[8]=e=>l.instanceCfg.ipv6=e),placeholder:"实例IPV6地址",disabled:!0},null,8,["modelValue"])])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"primary",onClick:a[9]||(a[9]=e=>d.createIpv6()),disabled:!!l.instanceCfg.ipv6,block:"",loading:l.ipv6Loading},{default:(0,n.k6)((()=>a[23]||(a[23]=[(0,n.eW)("附加IPV6 ")]))),_:1},8,["disabled","loading"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(k,{class:"config-card"},{default:(0,n.k6)((()=>[a[27]||(a[27]=(0,n.Lk)("div",null,"自动救援/缩小硬盘（默认47GB）",-1)),(0,n.bF)(f,{gutter:20,align:"middle",style:{"margin-top":"10px"}},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:16},{default:(0,n.k6)((()=>[(0,n.bF)(y,{modelValue:l.keepBackupVolume,"onUpdate:modelValue":a[10]||(a[10]=e=>l.keepBackupVolume=e)},{default:(0,n.k6)((()=>a[25]||(a[25]=[(0,n.eW)("保留原引导卷的备份卷（不占用引导卷额度，用于救援失败后恢复） ")]))),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"primary",onClick:a[11]||(a[11]=e=>d.autoRescue()),block:""},{default:(0,n.k6)((()=>a[26]||(a[26]=[(0,n.eW)("开始救援/缩小硬盘")]))),_:1})])),_:1})])),_:1})])),_:1})])],64)}t(4114);var l=t(1219),d=t(2933),u={data(){return{username:"",instanceId:"",ociCfgId:"",instanceCfg:{instanceName:"",ipv6:"",ocpus:1,memory:1,bootVolumeSize:50,bootVolumeVpu:10},flushLoading:!1,nameLoading:!1,cpuLoading:!1,bootVolumeLoading:!1,ipv6Loading:!1,keepBackupVolume:!1}},mounted(){this.username=this.$route.query.username,this.instanceId=this.$route.query.ocId,this.ociCfgId=this.$route.query.ociCfgId,this.getInstanceCfgInfo()},methods:{goBack(){this.$router.back()},async getInstanceCfgInfo(){this.flushLoading=!0,await this.$axios.post("/oci/getInstanceCfgInfo",{ociCfgId:this.ociCfgId,instanceId:this.instanceId}).then((e=>{e.data.success?(this.instanceCfg=e.data.data,(0,l.nk)({message:e.data.msg,type:"success",duration:2e3}),this.flushLoading=!1):(0,l.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))},async autoRescue(){try{let e="确定要开始救援/缩小硬盘吗？ ⚠️ 请确保删除掉原引导卷后，至少还剩余100GB引导卷额度！自动救援不一定百分百成功，如果中途失败，自行登录 Oracle Cloud 官方面板，将备份卷恢复成引导卷并附加回原实例。";this.keepBackupVolume&&(e+="🔔 当前选择了保留原引导卷的备份卷，救援结束后需要自行删除备份卷，否则会永久保留，且占用备份卷额度。");const a=await d.s.confirm(e,"自动救援/缩小硬盘操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===a&&this.$axios.post("/oci/autoRescue",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,name:this.instanceCfg.instanceName,keepBackupVolume:this.keepBackupVolume}).then((e=>{e.data.success?((0,l.nk)({message:"自动救援/缩小硬盘任务已下发，具体流程请查看日志",type:"success",duration:2e3}),this.$router.push("/dashboard/ociLog")):(0,l.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)}))}catch(e){(0,l.nk)({message:"操作已取消",type:"info",duration:2e3})}},async modifyInstanceName(){try{const e=await d.s.confirm("确定要修改实例名称吗？","修改实例名称操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.nameLoading=!0,await this.$axios.post("/oci/updateInstanceName",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,name:this.instanceCfg.instanceName}).then((e=>{e.data.success?((0,l.nk)({message:e.data.msg,type:"success",duration:2e3}),this.nameLoading=!1):(0,l.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})))}catch(e){(0,l.nk)({message:"操作已取消",type:"info",duration:2e3})}},async modifyCpuAndMemory(){try{const e=await d.s.confirm("修改实例CPU和内存会重启实例，确定要修改吗？","修改实例CPU和内存操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.cpuLoading=!0,await this.$axios.post("/oci/updateInstanceCfg",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,ocpus:this.instanceCfg.ocpus,memory:this.instanceCfg.memory}).then((e=>{e.data.success?((0,l.nk)({message:e.data.msg,type:"success",duration:2e3}),this.cpuLoading=!1):(0,l.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})))}catch(e){(0,l.nk)({message:"操作已取消",type:"info",duration:2e3})}},async modifyBootVolume(){try{const e=await d.s.confirm("确定要修改实例引导卷吗？","修改实例引导卷操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.bootVolumeLoading=!0,await this.$axios.post("/oci/updateBootVolumeCfg",{ociCfgId:this.ociCfgId,instanceId:this.instanceId,bootVolumeSize:this.instanceCfg.bootVolumeSize,bootVolumeVpu:this.instanceCfg.bootVolumeVpu}).then((e=>{e.data.success?((0,l.nk)({message:e.data.msg,type:"success",duration:2e3}),this.bootVolumeLoading=!1):(0,l.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})))}catch(e){(0,l.nk)({message:"操作已取消",type:"info",duration:2e3})}},async createIpv6(){try{const e=await d.s.confirm("确定要为实例附加 IPV6 吗？","附加 IPV6 操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});"confirm"===e&&(this.ipv6Loading=!0,await this.$axios.post("/oci/createIpv6",{ociCfgId:this.ociCfgId,instanceId:this.instanceId}).then((e=>{e.data.success?((0,l.nk)({message:e.data.msg,type:"success",duration:2e3}),this.ipv6Loading=!1):(0,l.nk)({message:e.data.msg,type:"error",duration:2e3})})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.getInstanceCfgInfo()})))}catch(e){(0,l.nk)({message:"操作已取消",type:"info",duration:2e3})}}}},r=t(1241);const m=(0,r.A)(u,[["render",c]]);var g=m}}]);
//# sourceMappingURL=866.beb1cc74.js.map