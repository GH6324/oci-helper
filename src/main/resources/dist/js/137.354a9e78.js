"use strict";(self["webpackChunkoci_help_web"]=self["webpackChunkoci_help_web"]||[]).push([[137],{4137:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var r=t(6768),s=t(4232);const l={style:{"overflow-x":"auto"}};function o(e,a,t,o,n,c){const i=(0,r.g2)("el-button"),d=(0,r.g2)("el-input"),p=(0,r.g2)("el-option"),g=(0,r.g2)("el-select"),u=(0,r.g2)("el-table-column"),h=(0,r.g2)("el-tooltip"),k=(0,r.g2)("el-tag"),b=(0,r.g2)("el-table"),m=(0,r.g2)("el-pagination"),P=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(i,{type:"success",style:{"margin-bottom":"20px"},onClick:c.createTaskPage},{default:(0,r.k6)((()=>a[4]||(a[4]=[(0,r.eW)(" 刷新 ")]))),_:1},8,["onClick"]),(0,r.bF)(d,{modelValue:n.createTaskPageParams.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>n.createTaskPageParams.keyword=e),placeholder:"模糊搜索配置名称/区域",onInput:c.createTaskPage,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"200px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),(0,r.bF)(g,{modelValue:n.createTaskPageParams.architecture,"onUpdate:modelValue":a[1]||(a[1]=e=>n.createTaskPageParams.architecture=e),onChange:c.createTaskPage,placeholder:"系统架构筛选",style:{"margin-left":"20px",width:"180px","margin-bottom":"20px"}},{default:(0,r.k6)((()=>[(0,r.bF)(p,{label:"全部",value:null}),(0,r.bF)(p,{label:"ARM",value:"ARM"}),(0,r.bF)(p,{label:"AMD",value:"AMD"}),(0,r.bF)(p,{label:"AMD_E5",value:"AMD_E5"})])),_:1},8,["modelValue","onChange"]),(0,r.bF)(i,{type:"danger",onClick:c.handleStopCreateBatch,disabled:!n.stopCreateBatchIds.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:(0,r.k6)((()=>a[5]||(a[5]=[(0,r.eW)(" 批量停止 ")]))),_:1},8,["onClick","disabled"]),(0,r.Lk)("div",l,[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(b,{data:n.createTaskRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:c.handleSelectionChange},{default:(0,r.k6)((()=>[(0,r.bF)(u,{type:"selection",width:"35"}),(0,r.bF)(u,{label:"名称"},{default:(0,r.k6)((({row:e})=>[(0,r.bF)(h,{content:e.username,placement:"top"},{default:(0,r.k6)((()=>[(0,r.eW)((0,s.v_)(e.username),1)])),_:2},1032,["content"])])),_:1}),(0,r.bF)(u,{label:"区域"},{default:(0,r.k6)((({row:e})=>[(0,r.bF)(h,{content:e.region,placement:"top"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{type:"primary"},{default:(0,r.k6)((()=>[(0,r.eW)((0,s.v_)(e.region),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,r.bF)(u,{prop:"ocpus",label:"CPU（核数）"}),(0,r.bF)(u,{prop:"memory",label:"内存（GB）"}),(0,r.bF)(u,{prop:"disk",label:"硬盘（GB）"}),(0,r.bF)(u,{prop:"operationSystem",label:"操作系统"}),(0,r.bF)(u,{label:"系统架构"},{default:(0,r.k6)((({row:e})=>[(0,r.bF)(h,{content:e.architecture,placement:"top"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{type:"ARM"===e.architecture?"success":"info"},{default:(0,r.k6)((()=>[(0,r.eW)((0,s.v_)(e.architecture),1)])),_:2},1032,["type"])])),_:2},1032,["content"])])),_:1}),(0,r.bF)(u,{prop:"interval",label:"间隔（秒）"}),(0,r.bF)(u,{label:"数量"},{default:(0,r.k6)((({row:e})=>[(0,r.bF)(k,{type:"primary"},{default:(0,r.k6)((()=>[(0,r.eW)((0,s.v_)(e.createNumbers),1)])),_:2},1024)])),_:1}),(0,r.bF)(u,{label:"次数",sortable:""},{default:(0,r.k6)((({row:e})=>[(0,r.bF)(k,{type:"warning"},{default:(0,r.k6)((()=>[(0,r.eW)((0,s.v_)(e.counts),1)])),_:2},1024)])),_:1}),(0,r.bF)(u,{sortable:"",prop:"createTime",label:"创建时间"},{default:(0,r.k6)((({row:e})=>[(0,r.bF)(h,{content:e.createTime,placement:"top"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{type:"info"},{default:(0,r.k6)((()=>[(0,r.eW)((0,s.v_)(e.createTime),1)])),_:2},1024)])),_:2},1032,["content"])])),_:1}),(0,r.bF)(u,{fixed:"right",label:"操作",width:"100"},{default:(0,r.k6)((({row:e})=>[(0,r.bF)(i,{onClick:a=>c.handleStopTask(e),type:"danger",link:""},{default:(0,r.k6)((()=>a[6]||(a[6]=[(0,r.eW)("停止")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[P,n.loading]])]),(0,r.bF)(m,{onCurrentChange:c.handlePageChange,onSizeChange:c.handleSizeChange,"current-page":n.createTaskPageParams.currentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>n.createTaskPageParams.currentPage=e),"page-size":n.createTaskPageParams.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>n.createTaskPageParams.pageSize=e),"page-sizes":[5,10,20,50],total:n.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])])}t(4114),t(1454);var n=t(2565),c=t(7815),i=t(9623),d=t(47),p=t(1219),g={components:{ElTable:n.Up,ElTableColumn:n.o8,ElPagination:c.aQ,ElInput:i.WK,ElButton:d.S2},data(){return{createTaskPageParams:{keyword:"",currentPage:1,pageSize:10,architecture:""},createTaskRsp:[],selectedTasks:[],total:0,stopCreateBatchIds:[],loading:!0}},mounted(){this.createTaskPage()},methods:{handlePageChange(e){this.createTaskPageParams.currentPage=e,this.createTaskPage()},handleSizeChange(e){this.createTaskPageParams.currentPage=1,this.createTaskPageParams.pageSize=e,this.createTaskPage()},handleSelectionChange(e){this.stopCreateBatchIds=e},createTaskPage(){this.loading=!0,this.$axios.post("/oci/createTaskPage",{...this.createTaskPageParams}).then((e=>{this.createTaskRsp=e.data.data.records,this.total=e.data.data.total})).catch((e=>{console.error("Error:",e)})),this.loading=!1},handleStopTask(e){const a=window.confirm("确定要停止 "+e.username+" 的这个开机任务吗?");a?(this.selectedTasks.push(e.id),this.$axios.post("/oci/stopCreateBatch",{idList:this.selectedTasks}).then((e=>{e.data.success?(0,p.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,p.nk)({message:e.data.msg,type:"error",duration:2e3}),this.createTaskPage()})).catch((e=>{console.error("Error:",e)})).finally((()=>{this.selectedTasks=[]}))):this.$message.info("已取消")},handleStopCreateBatch(){const e=window.confirm("确定要停止这些开机任务吗");e?this.stopCreateBatch():this.$message.info("已取消")},stopCreateBatch(){const e=this.stopCreateBatchIds.map((e=>e.id));this.$axios.post("/oci/stopCreateBatch",{idList:e}).then((e=>{e.data.success?(0,p.nk)({message:e.data.msg,type:"success",duration:2e3}):(0,p.nk)({message:e.data.msg,type:"error",duration:2e3}),this.createTaskPage()})).catch((e=>{console.error("Error:",e)}))}}},u=t(1241);const h=(0,u.A)(g,[["render",o]]);var k=h}}]);
//# sourceMappingURL=137.354a9e78.js.map